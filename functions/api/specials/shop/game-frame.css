/* public/assets/css/game-frame.css
   ------------------------------------------------------------
   목적:
   1) 어떤 해상도/모니터에서도 게임 화면 비율 고정 (기본 16:9)
   2) 캔버스/iframe/내부 UI가 부모 컨테이너를 넘어 깨지지 않게 방지
   3) 모바일/작은 화면에서도 스케일 다운 + 스크롤/겹침 최소화
   4) 사이드 광고 영역이 있어도 중앙 게임 영역이 안정적으로 유지
   ------------------------------------------------------------ */

/* ====== 기본 리셋(필요 최소) ====== */
:root{
  --rg-max: 960px;           /* 기본 최대 폭 */
  --rg-ratio-w: 16;
  --rg-ratio-h: 9;

  --rg-safe-pad: 12px;
  --rg-panel-radius: 18px;

  /* 화면 높이를 꽉 채우는 레이아웃에서 과도한 확대 방지 */
  --rg-min-h: 360px;
}

* { box-sizing: border-box; }
img, canvas, video, svg { max-width: 100%; height: auto; display: block; }

/* ====== 공통 중앙 프레임 ======
   .game-frame : 페이지 전체에서 게임/캐비닛을 감싸는 래퍼(권장)
   .game-canvas: 실제로 비율 고정이 적용되는 영역 (핵심)
*/
.game-frame{
  width: 100%;
  padding: var(--rg-safe-pad);
  display: flex;
  justify-content: center;
  align-items: flex-start;
}

.game-canvas{
  position: relative;
  width: 100%;
  max-width: var(--rg-max);
  margin: 0 auto;
  display: block;

  /* ✅ 핵심: 비율 고정 */
  aspect-ratio: calc(var(--rg-ratio-w) / var(--rg-ratio-h));

  /* 너무 납작/너무 높아지지 않게 */
  min-height: var(--rg-min-h);

  /* 깔끔한 프레임 */
  border-radius: var(--rg-panel-radius);
  overflow: hidden;
}

/* ====== 캔버스/iframe/내부 컨텐츠 ====== */
.game-canvas > canvas,
.game-canvas > iframe,
.game-canvas > .canvas,
.game-canvas > .screen,
.game-canvas > .stage,
.game-canvas > .game{
  width: 100% !important;
  height: 100% !important;
  display: block;
}

/* 캔버스는 픽셀 깨짐 최소화 */
.game-canvas canvas{
  object-fit: contain;
  image-rendering: auto;
}

/* 게임 페이지에서 사용하는 내부 레이어(패널/오버레이)가 프레임을 넘지 않도록 */
.game-canvas .overlay,
.game-canvas .modal,
.game-canvas .dialog,
.game-canvas .popup,
.game-canvas .ui,
.game-canvas .hud,
.game-canvas .panel{
  max-width: 100%;
  max-height: 100%;
}

/* ====== “아케이드 캐비닛” 구조를 가진 페이지 호환 ======
   기존 클래스(.cabinet)가 있다면 프레임 안에 자연스럽게 들어오게 함
*/
.game-canvas .cabinet,
.game-canvas.cabinet{
  width: 100%;
  height: 100%;
}

/* 캐비닛이 자체적으로 고정 px로 되어 있을 때 스케일링으로 맞춤 */
.game-canvas .cabinet{
  transform-origin: top center;
}

/* ====== 작은 화면(모바일/저해상도) 대응 ====== */
@media (max-width: 980px){
  :root{ --rg-max: 92vw; }
  .game-frame{ padding: 10px; }
}

@media (max-width: 600px){
  :root{
    --rg-max: 96vw;
    --rg-panel-radius: 14px;
    --rg-safe-pad: 8px;
    --rg-min-h: 300px;
  }
}

/* ====== 초광각/대형 모니터에서 과도한 확장 방지 ====== */
@media (min-width: 1400px){
  :root{ --rg-max: 1020px; }
}

/* ====== (선택) 4:3 게임을 쓰고 싶으면 HTML에서 클래스만 추가 ======
   예: <div class="game-canvas ratio-4x3"> ... </div>
*/
.game-canvas.ratio-4x3{
  aspect-ratio: 4 / 3;
}
.game-canvas.ratio-1x1{
  aspect-ratio: 1 / 1;
}
