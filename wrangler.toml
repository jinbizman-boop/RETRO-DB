# wrangler.toml — Cloudflare Pages + Pages Functions
# 프로젝트: RETRO GAMES (static: /public, functions: /functions)
# ⚠️ 프로덕션 환경변수는 Cloudflare Pages 대시보드(프로젝트 → Settings → Environment variables)에서 설정.
# ⚠️ 로컬 개발 환경변수는 .dev.vars 파일을 사용(.gitignore로 관리).

name = "retro-db"
compatibility_date = "2024-11-01"
# Node 내장 API(Buffer/crypto/path 등) 사용 시 권장
compatibility_flags = ["nodejs_compat"]

# 정적 산출물 폴더(리포지토리 루트 기준)
# 절대 ../public 같은 상위 경로를 사용하지 마세요.
pages_build_output_dir = "public"

# Pages Functions 위치(라우팅: /functions/api.ts → /api)
[pages]
functions_directory = "functions"

# 로컬 미리보기 설정 (wrangler pages dev)
[dev]
ip = "127.0.0.1"
port = 8788
local_protocol = "http"
inspect = false

# 로컬 전용 값은 .dev.vars 로 주입(이 블록은 비워두는 것을 권장)
[vars]
# 예시) 로컬 테스트용(실서버 값은 반드시 대시보드에 입력)
# CORS_ORIGIN = "http://127.0.0.1:8788"
# JWT_ISSUER  = "retro-games"
# JWT_AUD     = "retro-games-client"
# 주의: 프로덕션용 NEON_DATABASE_URL/JWT_SECRET 등은 여기에 넣지 않습니다.

# 관찰/로그(원하면 활성화)
[observability]
enabled = false

# 번들/런타임(ESM 코드 기본 가정)
# 정적 사이트라 빌드 명령은 비워두고, dev 시 public 변경 감지만 켭니다.
[build]
command = ""          # 빌드 없음(정적 폴더 그대로 사용)
watch_dir = "public"  # 로컬 dev 시 변경 감지 폴더
