# wrangler.toml — Cloudflare Pages + Pages Functions
# 프로젝트: RETRO GAMES (static: /public, functions: /functions)
# ⚠️ 프로덕션 환경변수는 대시보드(“설정 → 환경 변수”)에서 설정하세요.
# ⚠️ 로컬 개발 환경변수는 .dev.vars 를 사용합니다.

name = "retro-db"
compatibility_date = "2024-11-01"

# Pages가 정적 산출물을 가져갈 폴더(리포지토리 루트 기준)
# 절대 ../public 같은 상위 경로를 사용하지 마세요.
pages_build_output_dir = "public"

# Pages Functions 위치(기본값이 "functions"이지만, 오동작 방지용으로 명시)
[pages]
functions_directory = "functions"

# wrangler pages dev 동작 튜닝(로컬 미리보기)
[dev]
ip = "127.0.0.1"
port = 8788
local_protocol = "http"
inspect = false

# 로컬에서만 사용되는 환경변수는 .dev.vars 로 주입됩니다.
# 아래 [vars] 는 비워 두고, 필요한 경우 로컬 전용 키만 임시로 넣어 테스트하세요.
[vars]
# 예시) 로컬 테스트용 임시 값(실서버에서는 반드시 대시보드에 설정)
# CORS_ORIGIN = "http://127.0.0.1:8788"
# JWT_ISSUER  = "retro-games"
# JWT_AUD     = "retro-games-client"
# 주의: 실서버용 NEON_DATABASE_URL/JWT_SECRET 등은 여기 넣지 마세요.

# 관찰/로그 옵션(원하면 활성화)
[observability]
enabled = false

# 번들러/런타임 관련 기본값(ESM 기반 코드 호환)
# node_compat 는 기본적으로 불필요합니다. 필요 시 true 로 변경.
[build]
command = ""         # 빌드 없음(정적 폴더 그대로 사용)
watch_dir = "public" # 로컬 dev 시 변경 감지 폴더

# 실수 방지를 위한 주석 모음
# - 정적 파일:      /public/*
# - 함수 엔드포인트: /functions/**  →  /api/* 형식 라우팅 자동 처리(Pages Functions 규칙)
# - 환경변수: 대시보드 또는 .dev.vars 로 주입
# - 배포 오류 시: 빌드 로그에서 'pages_build_output_dir: public' 인지 확인