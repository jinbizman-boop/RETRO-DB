<!DOCTYPE html>
<html lang="ko" data-env="production" data-analytics="on">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>RETRO GAMES ‚Äì DINO RUNNER</title>

<!-- === Common SEO/A11y (auto-inserted) === -->
<link rel="icon" href="/assets/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/icon-180.png">
<link rel="manifest" href="/site.webmanifest">
<meta name="theme-color" content="#0e1b34">
<meta name="description" content="RETRO DINO RUNNER ‚Äì Arcade Cabinet (Fixed, Responsive) | Î†àÌä∏Î°ú Í∞êÏÑ± ÎØ∏ÎãàÍ≤åÏûÑÏùÑ Ï¶êÍ∏∞Îäî RETRO GAMES">
<meta name="robots" content="index,follow">
<meta property="og:site_name" content="RETRO GAMES">
<meta property="og:title" content="RETRO DINO RUNNER ‚Äì Arcade Cabinet (Fixed, Responsive)">
<meta property="og:description" content="RETRO DINO RUNNER ‚Äì Arcade Cabinet (Fixed, Responsive) | Î†àÌä∏Î°ú Í∞êÏÑ± ÎØ∏ÎãàÍ≤åÏûÑÏùÑ Ï¶êÍ∏∞Îäî RETRO GAMES">
<meta property="og:type" content="website">
<meta property="og:image" content="/assets/og/retro-games-card.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="RETRO DINO RUNNER ‚Äì Arcade Cabinet (Fixed, Responsive)">
<meta name="twitter:description" content="RETRO DINO RUNNER ‚Äì Arcade Cabinet (Fixed, Responsive) | Î†àÌä∏Î°ú Í∞êÏÑ± ÎØ∏ÎãàÍ≤åÏûÑÏùÑ Ï¶êÍ∏∞Îäî RETRO GAMES">
<meta name="twitter:image" content="/assets/og/retro-games-card.png">
<script>
  // fixed environment flags for analytics/runtime
  (function(d){
    d.documentElement.dataset.env = 'production';
    d.documentElement.dataset.analytics = 'on';
    window.__ENV__ = 'production';
    window.__ANALYTICS_ON__ = true;
  })(document);
</script>
<!-- === /Common SEO/A11y === -->

<!-- AdSense Ïä§ÎãàÌé´(ÏöîÏ≤≠ Í∑∏ÎåÄÎ°ú) -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6713974265397310" crossorigin="anonymous"></script>

<style>
  :root{
    --cabinet:#071933; --cabinet2:#0b2a57; --bezel:#0c1e3f; --glow:#0ea5ff; --side:#f4be09;
    --btn:#133262; --btnBorder:#285dd1; --btnFg:#e9f1ff;
    --board:#121a2f; --tile0:#e9eef6; --ink:#111;
    --t2:#e7f4ff; --t4:#d6eaff; --t8:#ffe7c2; --t16:#ffd6a6; --t32:#ffc8a6; --t64:#ffb79c;
    --t128:#fff3a8; --t256:#fff09a; --t512:#ffeb8a; --t1024:#eaff9c; --t2048:#caffb0; --t4096:#b6ffd2; --t8192:#b2fff0;
    --touchMin:44px;
  }
  *{box-sizing:border-box}
  html,body{
    height:100%;margin:0;color:#fff;
    font-family:'Pretendard',ui-sans-serif,system-ui,"Segoe UI",Roboto,"Apple SD Gothic Neo";
    overflow:hidden;
    background-color:#0b001e;
    background-image:radial-gradient(circle at 40% -10%, #320076, #0b001e 70%);
    background-repeat:no-repeat; background-size:cover;
  }
  #fx{position:fixed;inset:0;pointer-events:none;z-index:0;opacity:.75}
  .shell{min-height:100vh;display:grid;place-items:center;padding:20px;position:relative;z-index:1;padding-bottom:calc(20px + env(safe-area-inset-bottom,0))}
  /* Cabinet */
  .cabinet{
    position:relative;width:min(1200px,96vw);
    background-color:#0e1b34;border-radius:18px;
    box-shadow:0 12px 40px rgba(0,0,0,.65),inset 0 0 0 2px #0a1a33;
    transform-origin:top center
  }
  .cabinet:before,.cabinet:after{
    content:"";position:absolute;top:12px;bottom:12px;width:18px;
    filter:drop-shadow(0 0 12px rgba(255,190,0,.55));
    background-image:linear-gradient(180deg,#ffd34a,#f0b400 60%,#d99a00);
  }
  .cabinet:before{left:12px;border-radius:9px}
  .cabinet:after{right:12px;border-radius:9px}

  .marquee{
    padding:18px;border-radius:18px 18px 0 0;border-bottom:1px solid #0c2b59;
    box-shadow:inset 0 -6px 26px rgba(0,0,0,.35);
    background-image:linear-gradient(180deg,#173763,#0b2548)
  }
  .title{display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap}
  .title h1{margin:0;font-weight:900;letter-spacing:2px;color:#eaf3ff;text-shadow:0 0 12px rgba(62,142,255,.55);font-size:clamp(18px,4.4vw,28px)}
  .subtitle{opacity:.75;letter-spacing:.15em;font-size:clamp(10px,2.7vw,12px);text-align:center}

  /* HUD */
  .hud{display:flex;gap:12px;padding:12px;justify-content:center;flex-wrap:wrap}
  .chip,.pill,.hud .btnMini{
    position:relative;min-width:128px;height:46px;padding:0 16px;border-radius:14px;border:1px solid #1e63ff;color:#fff;font-weight:900;
    display:inline-flex;align-items:center;justify-content:center;letter-spacing:.3px;
    box-shadow:0 12px 18px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.5), inset 0 -8px 14px rgba(0,0,0,.28);
    background-image:linear-gradient(180deg,#8fe0ff 0%,#49a8ff 26%,#2f84ff 58%,#1560f2 100%),radial-gradient(140% 120% at 20% -40%,rgba(255,255,255,.65),rgba(255,255,255,0) 55%);
    background-repeat:no-repeat;
    touch-action:manipulation;
  }
  .chip b{color:#fff;font-weight:900;padding-left:6px;text-shadow:0 1px 0 rgba(0,0,0,.25)}
  .pill{min-width:260px;gap:12px}
  .pill .icon{
    width:28px;height:28px;display:grid;place-items:center;border-radius:50%;color:#0b2a57;
    box-shadow:inset 0 -4px 8px rgba(0,0,0,.25), 0 0 10px rgba(255,255,255,.65);
    background-image:radial-gradient(circle at 30% 30%,#ffffff,#d8f1ff)
  }
  .points .bar,.tickets .bar{height:8px;border-radius:999px;background:#1a2548;overflow:hidden;border:1px solid #2b3f8f;width:120px}
  .points .bar>span,.tickets .bar>span{display:block;height:100%;width:0%;box-shadow:0 0 10px #8ad7ff; background-image:linear-gradient(90deg,#b86cff,#6af0ff)}
  .points .nums,.tickets .nums{display:flex;align-items:baseline;gap:8px;font-weight:900}
  .points .nums .big,.tickets .nums .big{font-size:18px;color:#ffe9a3;text-shadow:0 0 8px #ffd86a}
  .points .nums .cap,.tickets .nums .cap{opacity:.8;font-size:12px}
  .playCount{font-size:12px;opacity:.85;margin-left:6px}

  /* Screen */
  .play{position:relative;margin:10px 18px;border-radius:16px;box-shadow:inset 0 0 0 1px #0b2a57,inset 0 0 60px rgba(0,0,0,.65);
    background-image:linear-gradient(180deg,#0a1530,#031125)}
  .screen{aspect-ratio:16/9;display:grid;place-items:center;padding:18px}
  .bezel{
    width:100%;height:100%;border-radius:14px;box-shadow:inset 0 0 0 1px #132a59,inset 0 0 60px rgba(0,0,0,.65);
    display:grid;place-items:center;position:relative;overflow:hidden;
    background-image:radial-gradient(120% 200% at 50% -60%,rgba(255,255,255,.07),rgba(255,255,255,0) 40%),linear-gradient(180deg,#0a1c39,#0a1326)
  }
  .canvasWrap{width:min(92%,980px);max-height:85%;display:grid;place-items:center}
  canvas#game{
    display:block;max-width:100%;max-height:100%;width:100%;height:100%;
    background:#000;border-radius:18px;border:1px solid #1b2b45;box-shadow:inset 0 0 40px rgba(0,0,0,.25)
  }

  /* Overlay */
  .overlay{position:absolute;inset:0;display:none;align-items:center;justify-content:center;background-color:rgba(5,0,20,.55);backdrop-filter:blur(2px);z-index:5}
  .overlay .msg{font-weight:900;letter-spacing:.2em;text-align:center;filter:drop-shadow(0 6px 20px rgba(0,0,0,.6));
    font-size:clamp(28px,5vw,68px);color:#ffe166;text-shadow:0 0 16px rgba(255,225,102,.45),0 0 40px rgba(14,165,255,.25)}
  .overlay .sub{margin-top:10px;font-size:clamp(12px,2.2vw,16px);opacity:.9;color:#dfe9ff;text-align:center}

  /* Deck */
  .deck{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;padding:14px 18px 22px;border-top:1px solid #0a2b57;
    background-image:linear-gradient(180deg,#0b1f40,#0a1730)}
  .deck .btn,.deck select,.deck input[type=range]{
    font-weight:900;color:#dff1ff;border:1px solid #224aa8;border-radius:12px;padding:10px 14px;
    box-shadow:0 10px 18px rgba(0,0,0,.45),inset 0 0 18px rgba(255,255,255,.05);cursor:pointer;
    background-image:linear-gradient(180deg,#1b3a7a,#102a66); touch-action:manipulation;
  }
  .deck .btn:hover,.deck select:hover{filter:brightness(1.06)}
  .deck label{display:flex;align-items:center;gap:8px}
  .deck input[type=range]{width:140px;height:12px;accent-color:#5fb0ff}

  /* Records Modal */
  #recModal{display:none;position:fixed;inset:0;background-color:rgba(5,0,20,.55);backdrop-filter:blur(4px);align-items:center;justify-content:center;z-index:999}

  /* In-game Inventory HUD */
  .invHud{position:absolute; left:12px; top:12px; z-index:4; display:flex; align-items:center; gap:8px; padding:6px 10px; border-radius:12px; border:1px solid #224aa8;
    background-image:linear-gradient(180deg,#1b3a7a,#102a66); box-shadow:0 10px 18px rgba(0,0,0,.45), inset 0 0 18px rgba(255,255,255,.05); pointer-events:none;}
  .invHud .tag{font-weight:900; letter-spacing:.03em; opacity:.95}
  .invHud .list{display:flex; align-items:center; gap:6px; font-size:18px}
  .invHud .slot{display:inline-flex; align-items:center; justify-content:center; width:22px; height:22px}
  .invHud .rev{font-size:14px; opacity:.9}

  .toast{position:absolute;left:50%;top:16px;transform:translateX(-50%);background:#0f1d48;border:1px solid #224aa8;border-radius:12px;padding:8px 12px;font-weight:700;box-shadow:0 10px 20px #0008;display:none;z-index:6}

  @media (max-width: 980px){
    .shell{padding:12px;padding-bottom:calc(12px + env(safe-area-inset-bottom,0))}
    .cabinet{width:100vw;border-radius:0}
    .marquee{padding:12px;border-radius:0}
    .play{margin:8px 12px}
    .screen{padding:10px}
    .hud{gap:8px;padding:10px}
    .chip,.pill,.hud .btnMini{min-width:112px;height:42px;padding:0 12px}
    .pill{min-width:220px}
    .deck{gap:8px;padding:10px 12px 16px}
    .deck .btn,.deck select,.deck input[type=range]{padding:10px 12px}
    .invHud{left:8px;top:8px;transform:scale(.95);transform-origin:top left}
  }
  @media (max-width: 640px){
    .subtitle{letter-spacing:.08em}
    .hud{padding:8px}
    .chip,.pill,.hud .btnMini{height:40px}
    .points .nums .big,.tickets .nums .big{font-size:16px}
    .points .bar,.tickets .bar{width:96px}
    .deck{justify-content:flex-start;overflow:auto;-webkit-overflow-scrolling:touch}
    .deck > *{flex:0 0 auto}
    .invHud{transform:scale(.9)}
  }

  .touchLayer{position:absolute; inset:0; display:none; z-index:3;}
  .touchZone{position:absolute; top:0; bottom:0; width:50%; touch-action:none;}
  .tzLeft{left:0;} .tzRight{right:0;}
  .touchHint{position:absolute; bottom:8px; left:50%; transform:translateX(-50%); font-size:12px; opacity:.6; background:#0007; padding:6px 10px; border-radius:10px;}
  @media (hover:none){ .touchLayer{display:block;} }

  .cookie-banner{position:fixed;left:12px;right:12px;bottom:12px;
    display:none;align-items:center;gap:10px;padding:10px 12px;border-radius:12px;
    border:1px solid #2b3f8f;background:linear-gradient(180deg,#0b1f40,#0a1730);
    box-shadow:0 10px 18px rgba(0,0,0,.45),inset 0 0 18px rgba(255,255,255,.05);
    z-index:10000;font-size:12px}
  .cookie-banner .spacer{flex:1}
  .cookie-banner button{padding:8px 12px;border-radius:10px;border:1px solid #2d3690;
    background:linear-gradient(180deg,#1a2b7a,#0a1a64);font-weight:800;color:#e9f0ff;cursor:pointer}
  .cookie-banner .agree{background:linear-gradient(180deg,#ffdf6e,#ffb84d);color:#3a2400;border-color:#7a5600}
  /* ==============================
     ‚úÖ AdSense Ï¢å/Ïö∞ Î∞∞ÎÑà (Ï∫êÎπÑÎãõ Ï¢åÏö∞Ïóê Îî± Î∂ôÍ≤å)
     - Í≤åÏûÑ UI/UX(Ï∫êÎπÑÎãõ/Ï∫îÎ≤ÑÏä§/Îç±)ÏóêÎäî ÏòÅÌñ• 0
     - ÌôîÎ©¥Ïóê fixed overlayÎ°úÎßå Î∞∞Ïπò
  ============================== */
  :root{
    --rg-cabW: min(1200px,96vw); /* .cabinet widthÏôÄ ÎèôÏùº */
    --rg-adW: 160px;
    --rg-adGap: 16px;
  }
  .sideAd{
    position: fixed;
    top: 50%;
    transform: translateY(-50%);
    width: var(--rg-adW);
    min-height: 600px;
    z-index: 120;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: auto;
  }
  .sideAd.left{
    left: calc(50% - (var(--rg-cabW) * 0.5) - var(--rg-adW) - var(--rg-adGap));
  }
  .sideAd.right{
    right: calc(50% - (var(--rg-cabW) * 0.5) - var(--rg-adW) - var(--rg-adGap));
  }
  .sideAdInner{
    width: 100%;
    min-height: 600px;
    border-radius: 16px;
    border: 1px solid #2b3f8f;
    background: linear-gradient(180deg,#0b1f40,#050814);
    box-shadow: 0 10px 24px rgba(0,0,0,.65), inset 0 0 18px rgba(62,142,255,.35);
    overflow: hidden;
  }
  .sideAd ins.adsbygoogle{
    display: block;
    width: 100%;
    height: 100%;
  }
  /* Î™®Î∞îÏùº/Ï¢ÅÏùÄ ÌôîÎ©¥ÏóêÏÑúÎäî Í≤åÏûÑ ÌôîÎ©¥ Î≥¥Ìò∏ (UI/UX Ïú†ÏßÄ) */
  @media (max-width: 1100px){
    .sideAd{ display:none; }
  }
</style>
</head>

<!-- ÌîÑÎ°úÏ†ùÌä∏ Ïä§ÌÅ¨Î¶ΩÌä∏ -->
<script defer src="/assets/js/app.js"></script>
<script defer src="/assets/js/analytics.js"></script>

<body>
  <div id="site-header"></div>
  <canvas id="fx"></canvas>

  <!-- ‚úÖ Ï¢å/Ïö∞ AdSense Î∞∞ÎÑà: Ï∫êÎπÑÎãõ(Í≤åÏûÑÍ∏∞) Ï¢åÏö∞ Í≥†Ï†ï (UI/UX/ÌîåÎ†àÏù¥ Î°úÏßÅ Î¨¥ÏÜêÏÉÅ) -->
  <aside class="sideAd left" aria-label="left ad">
    <div class="sideAdInner">
      <ins class="adsbygoogle"
        data-ad-client="ca-pub-6713974265397310"
        data-ad-slot="4514999077"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    </div>
  </aside>

  <aside class="sideAd right" aria-label="right ad">
    <div class="sideAdInner">
      <ins class="adsbygoogle"
        data-ad-client="ca-pub-6713974265397310"
        data-ad-slot="4514999077"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    </div>
  </aside>

  <script>
    // ‚úÖ Î∞∞ÎÑà Í¥ëÍ≥† Ï¥àÍ∏∞Ìôî (Î°úÎçîÎäî headÏóêÏÑú async Î°úÎìúÎê®)
    try { (window.adsbygoogle = window.adsbygoogle || []).push({}); } catch(e){}
    try { (window.adsbygoogle = window.adsbygoogle || []).push({}); } catch(e){}
  </script>

  <div class="shell">
    <section class="cabinet" aria-label="retro arcade cabinet">
      <header class="marquee">
        <div class="title">
          <h1>RETRO DINO RUNNING</h1>
          <div class="subtitle">SPACE/ENTER: START ¬∑ SPACE/‚Üë: Jump (2nd stage) ¬∑ ‚Üì: Crouching ¬∑ U: Pause ¬∑ I: Items</div>
        </div>
      </header>

      <!-- HUD -->
      <div class="hud">
        <div class="chip">SCORE <b id="score">0</b></div>
        <div class="chip">BEST <b id="best">0</b></div>
        <div class="chip">MOVES <b id="moves">0</b></div>

        <div class="pill points" aria-label="ÏÇ¨Ïö©Ïûê Ìè¨Ïù∏Ìä∏">
          <div class="icon">üèÖ</div>
          <div>
            <div class="nums"><span class="big" id="pointsAmt">0</span><span class="cap">/ <span id="pointsCap">5,000</span></span></div>
            <div class="bar"><span id="pointsBar"></span></div>
          </div>
        </div>

        <div class="pill tickets" aria-label="Ìã∞Ïºì ÏßÑÌñâ">
          <div class="icon">üéüÔ∏è</div>
          <div>
            <div class="nums"><span class="big" id="ticketsAmt">0</span><span class="cap">TICKET</span></div>
            <div class="bar"><span id="ticketsBar"></span></div>
          </div>
          <div class="playCount" id="ticketsCap">0 / 10</div>
        </div>

        <button class="btnMini" id="recordsBtn" aria-label="Game rules">GAME RULE</button>
      </div>

      <main class="play">
        <div class="screen">
          <div class="bezel">
            <div class="invHud" aria-label="Ïù∏Í≤åÏûÑ ÏïÑÏù¥ÌÖú">
              <div class="tag">üéí ITEMS</div>
              <div id="invHudList" class="list" aria-live="polite"></div>
            </div>

            <div id="toast" class="toast" role="status" aria-live="polite"></div>

            <div class="canvasWrap" id="canvasWrap">
              <canvas id="game"></canvas>
              <div class="touchLayer" id="touchLayer" aria-hidden="true">
                <div class="touchZone tzLeft" id="tzLeft"></div>
                <div class="touchZone tzRight" id="tzRight"></div>
                <div class="touchHint">LEFT: If you press it, curl up / RIGHT: Tap = jump, double tap = start/start</div>
              </div>
            </div>

            <div id="gameOver" class="overlay" aria-live="polite" role="alert">
              <div>
                <div class="msg">GAME OVER</div>
                <div class="sub">N/Enter/Space: NEW GAMES ¬∑ U: Pause/Resume ¬∑ SPACE/‚Üë: jump</div>
              </div>
            </div>
          </div>
        </div>
      </main>

      <!-- Control deck -->
      <div class="deck">
        <button class="btn" id="homeBtn">HOME</button>
        <button class="btn" id="newBtn">NEW GAME (N)</button>
        <button class="btn" id="undoBtn">RETURN (U)</button>
        <label>MODE
          <select id="tier">
            <option value="beginner">Beginner (1‚Äì10)</option>
            <option value="intermediate">Intermediate (11‚Äì20)</option>
            <option value="advanced">High quality (21‚Äì30)</option>
            <option value="hell">Hell (40)</option>
            <option value="doom">Ruin (50)</option>
            <option value="insane">Heinous crime (100)</option>
          </select>
        </label>
        <label>LEVEL <input id="lvlRange" type="range" min="1" max="100" value="1" step="1"></label>
        <label>BOARD
          <select id="sizeSel" disabled>
            <option value="12" selected>Fixation</option>
          </select>
        </label>
        <button class="btn" id="endBtn">GAME OVER</button>
      </div>
    </section>
  </div>

  <!-- Records Modal -->
  <div id="recModal">
    <div style="width:min(640px,94vw);border:2px solid #3e2b7b;border-radius:20px;box-shadow:0 30px 60px #000a,inset 0 0 24px #2a0085;padding:22px; background-image:radial-gradient(circle at 50% -60%,#1f0d48,#0c0626 70%);">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px"><h3 style="margin:0;color:#ffdf6e">GAME RULE</h3><button id="recClose" style="border:0;background-color:transparent;color:#fff;font-size:22px;cursor:pointer" aria-label="Close">√ó</button></div>
      <div id="recBody" style="max-height:60vh;overflow:auto;border:1px solid #2a3a89;border-radius:12px;padding:14px">
        <div style="color:rgba(234,243,255,.78);font-size:13px;line-height:1.65">

          <div style="margin-bottom:12px;padding:10px 12px;border-radius:12px;background:rgba(0,0,0,.18);border:1px solid rgba(255,255,255,.10)">
            RETRO DINO RUNNER is an endless runner. Start the run, jump over obstacles, crouch under threats, and survive as long as you can to set a new best score.
          </div>

          <h4 style="margin:12px 0 6px;color:#eaf3ff;font-size:13px">Controls</h4>
          <ul style="margin:6px 0 0;padding-left:18px">
            <li><b>Start / Restart:</b> Space or Enter (also N)</li>
            <li><b>Jump:</b> Space or ‚Üë (double jump available)</li>
            <li><b>Crouch:</b> ‚Üì (hold)</li>
            <li><b>Pause / Resume:</b> U</li>
            <li><b>Use Item:</b> I</li>
            <li><b>Mobile:</b> Right side tap = Jump / Double tap = Start ¬∑ Left side press = Crouch</li>
          </ul>

          <h4 style="margin:12px 0 6px;color:#eaf3ff;font-size:13px">Scoring & Rewards</h4>
          <ul style="margin:6px 0 0;padding-left:18px">
            <li>Your score increases over time as your speed ramps up.</li>
            <li>Avoiding obstacles awards points; streaks grant extra bonuses.</li>
            <li>Milestones (every 100 score) grant small point rewards.</li>
            <li>Your <b>Best</b> score is saved locally in your browser.</li>
          </ul>

          <h4 style="margin:12px 0 6px;color:#eaf3ff;font-size:13px">Items</h4>
          <ul style="margin:6px 0 0;padding-left:18px">
            <li><b>‚ö° Speed:</b> Temporary speed boost and faster scoring pace.</li>
            <li><b>‚ù§Ô∏è Revive:</b> Prevents a game over once (auto-consumed on collision).</li>
            <li>Unused items at the end may be converted into small bonus points.</li>
          </ul>

          <h4 style="margin:12px 0 6px;color:#eaf3ff;font-size:13px">Tips</h4>
          <ul style="margin:6px 0 0;padding-left:18px">
            <li>Time your jumps early‚Äîlate jumps are the #1 reason for collisions.</li>
            <li>Use crouch for low threats and to stabilize your rhythm.</li>
            <li>Save revive for higher speeds when reaction time is tight.</li>
            <li>If you need a break, use Pause (U) to avoid sudden mistakes.</li>
          </ul>

          <h4 style="margin:12px 0 6px;color:#eaf3ff;font-size:13px">Version</h4>
          <p style="margin:6px 0">RETRO GAMES ‚Ä¢ Web Mini Games ‚Ä¢ v1.0</p>

          <h4 style="margin:12px 0 6px;color:#eaf3ff;font-size:13px">Contact</h4>
          <p style="margin:6px 0">
            Business / support: <a href="mailto:jinbizman@gmail.com" style="color:rgba(255,223,110,.95);text-decoration:none;border-bottom:1px dotted rgba(255,223,110,.55)">jinbizman@gmail.com</a>
          </p>

          <div style="margin-top:12px;font-size:12px;color:rgba(234,243,255,.72);border-left:3px solid rgba(255,223,110,.55);padding:10px 12px;background:rgba(0,0,0,.18);border-radius:12px">
            Ads may be served by Google AdSense. Depending on your region and browser settings,
            ads may be personalized or shown in a non-personalized form.
          </div>

        </div>
      </div>
    </div>
  </div>

<script>

/***** Neon FX *****/
(function(){
  const c=document.getElementById('fx'); if(!c) return;
  const g=c.getContext('2d');
  function fit(){ const d=window.devicePixelRatio||1; c.width=innerWidth*d; c.height=innerHeight*d; g.setTransform(d,0,0,d,0,0); }
  fit(); addEventListener('resize',fit,{passive:true});
  const N=80;
  const pts=new Array(N).fill(0).map(()=>({ x: Math.random()*innerWidth, y: Math.random()*innerHeight*0.9, r: Math.random()*2+0.5, s: Math.random()*0.6+0.2, ph: Math.random()*6.283 }));
  function loop(t){
    g.clearRect(0,0,c.width,c.height);
    for(const p of pts){
      g.beginPath(); g.arc(p.x,p.y,p.r,0,Math.PI*2);
      const a=0.3+Math.sin(t*0.002+p.ph)*0.25;
      g.fillStyle='rgba(43,123,255,'+a+')'; g.fill();
      p.y+=p.s; if(p.y>innerHeight){ p.y=-10; p.x=Math.random()*innerWidth; }
    }
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);
})();

/***** Helpers & Storage *****/
const $=sel=>document.querySelector(sel);
const DPR=()=>Math.min(2, window.devicePixelRatio||1);
const clamp=(n,a,b)=>Math.max(a, Math.min(b,n));
const fmt=n=>n.toLocaleString('ko-KR');
const todayKey=()=> new Date().toISOString().slice(0,10);

/* ‚úÖ Dino Ï†ÑÏö© Ïä§ÌÜ†Î¶¨ÏßÄ ÌÇ§ */
const LS_KEYS={
  plays:'plays_dino',
  tickets:'tickets_dino',
  records:'records_dino',
  best:'best_dino',
  mission:'daily_mission_flags',
  missionRewarded:'daily_mission_rewarded'
};

function loadJSON(k,def){try{const v=localStorage.getItem(k); return v? JSON.parse(v): def;}catch(e){ return def; }}
function saveJSON(k,v){localStorage.setItem(k, JSON.stringify(v));}

function updateTicketUI(){
  const plays= +localStorage.getItem(LS_KEYS.plays)||0;
  const tickets= +localStorage.getItem(LS_KEYS.tickets)||0;
  $('#ticketsAmt').textContent=tickets;
  $('#ticketsCap').textContent=(plays%10)+' / 10';
  $('#ticketsBar').style.width = (((plays%10)/10*100).toFixed(1))+'%';
}
function addPlay(){
  let plays= +localStorage.getItem(LS_KEYS.plays)||0; plays++;
  let tickets= +localStorage.getItem(LS_KEYS.tickets)||0;
  if(plays%10===0) tickets++;
  localStorage.setItem(LS_KEYS.plays, String(plays));
  localStorage.setItem(LS_KEYS.tickets, String(tickets));
  updateTicketUI();
}
function addRecord(score, points){
  const recs=loadJSON(LS_KEYS.records,[]);
  const now=new Date(); recs.unshift({ts:now.toISOString(), score:score, points:points});
  saveJSON(LS_KEYS.records,recs.slice(0,200));
}
function openGameRule(){
  $('#recModal').style.display='flex';
}
$('#recordsBtn').addEventListener('click', openGameRule);

function closeGameRule(){
  $('#recModal').style.display='none';
}
$('#recClose').addEventListener('click', closeGameRule);

$('#recModal').addEventListener('click', e=>{
  if(e.target && e.target.id === 'recModal') closeGameRule();
});

window.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape' && $('#recModal')?.style.display === 'flex') closeGameRule();
});

/***** Toast *****/
function showToast(msg, ms=2000){
  const t=$('#toast'); if(!t) return; t.textContent=msg; t.style.display='block';
  clearTimeout(showToast._timer); showToast._timer=setTimeout(()=>{ t.style.display='none'; }, ms);
}

/***** Dino Runner (Í≤åÏûÑ) *****/
(function(){
  function difficultyMult(){
    const val=$('#tier')?.value||'beginner';
    return {beginner:1.00, intermediate:1.15, advanced:1.35, insane:1.60, hell:1.35, doom:1.50}[val] || 1.00;
  }
  function paramsForLevel(lv){
    var startSpd = 280 + lv*5.5;
    var maxSpd   = 520 + lv*6.5;
    var accel    = 10 + lv*0.35;
    var gravity  = 2000 + lv*8;
    var jumpVy   = -(760 + lv*2.5);
    var spawnMin = Math.max(320, 900 - lv*7);
    var birdRate = (lv<20)? 0 : Math.min(0.5, (lv-18)*0.02);
    var flock    = lv>=40? Math.min(0.45,(lv-35)*0.01) : 0;
    var nightSec = lv>=30? clamp(22 - (lv-30)*0.2, 10, 22) : 9999;
    var lowGap   = clamp(80 - lv*0.3, 42, 80);
    return {startSpd,maxSpd,accel,gravity,jumpVy,spawnMin,birdRate,flock,nightSec,lowGap};
  }

  var SFX=(function(){
    var ctx; function ensure(){ return ctx||(ctx=new (window.AudioContext||window.webkitAudioContext)()); }
    function beep(f, d, t, g){ f=f||880; d=d||0.05; t=t||'square'; g=g||0.06;
      var ac=ensure(); var o=ac.createOscillator(); var gn=ac.createGain();
      o.type=t; o.frequency.value=f; gn.gain.value=g; o.connect(gn); gn.connect(ac.destination);
      var now=ac.currentTime; o.start(now); o.stop(now+d); gn.gain.setTargetAtTime(0, now+d*0.6, 0.03);
    }
    return {
      milestone:()=>beep(1200,0.07,'square',0.07),
      hit:()=>beep(700,0.04,'square',0.05),
      step:()=>beep(500,0.02,'square',0.02),
      pickup:()=>beep(900,0.05,'square',0.05)
    };
  })();

  class Dino {
    constructor(canvas){
      this.c=canvas; this.ctx=canvas.getContext('2d');
      this.buf=document.createElement('canvas'); this.bctx=this.buf.getContext('2d');
      this.logicalW=800; this.logicalH=300; this.buf.width=this.logicalW; this.buf.height=this.logicalH;

      this.groundY=244;
      this.reset(1); this.bind(); this.resize(); this.loop();
      requestAnimationFrame(()=> this.resize());

      /* ‚úÖ ÏÑ∏ÏÖò ÏãúÏûë ÏïåÎ¶º */
      notifyStart();
    }

    reset(level){
      this.level=level||1; this.p=paramsForLevel(this.level);
      this.spd=this.p.startSpd; this.t=0; this.nextSpawn=0; this.dayT=0; this.isNight=false;
      this.milestoneScoreNext=100; this.boostT=0;
      this.score=0; this.best= +(localStorage.getItem(LS_KEYS.best)||0);
      this.running=false; this.paused=false; this.gameover=false;

      this.player={x:60,y:this.groundY,vy:0,w:44,h:48,duck:false,runT:0,blinkT:this.rand(2,7),jumps:0,maxJumps:2};
      this.objs=[]; this.items=[]; this.clouds=this.makeClouds(); this.fx=[];

      this.inv=[]; this.revive=0; this.itemInvT=0; this.itemSpeedMult=1; this.itemInvActive=false;
      this.points=0; this.pointsCap=5000;

      this.avoided=0; this.combo=0;

      this.syncHUD(true);
      this.updatePointsUI();
      this.renderInvUI();
      $('#gameOver').style.display='none';
    }

    rand(a,b){ return a + Math.random()*(b-a); }
    makeClouds(){ var arr=[]; for(var i=0;i<6;i++) arr.push({x:this.rand(0,this.logicalW), y:this.rand(20,90), sp:this.rand(10,20)}); return arr; }

    bind(){
      window.addEventListener('resize', ()=>this.resize(), {passive:true});
      $('#newBtn').addEventListener('click',()=>this.startOrRestart());
      $('#undoBtn').addEventListener('click',()=>{ if(this.running&&!this.gameover){ this.paused=!this.paused; }});
      $('#endBtn').addEventListener('click',()=> {
        this.doGameOver();
        window.location.href = '/index.html';
      });

      $('#homeBtn').addEventListener('click',()=> {
        window.location.href = '/index.html';
      });

      const tier=$('#tier'), lvl=$('#lvlRange');
      const applyTier=(t)=>{ let lv={beginner:1,intermediate:11,advanced:21,hell:40,doom:50,insane:100}[t]||1; lvl.value=lv; this.setLevel(lv); };
      tier.addEventListener('change',()=> applyTier(tier.value));
      lvl.addEventListener('input',()=> this.setLevel(+lvl.value));

      document.addEventListener('keydown',(e)=>{
        if((e.code==='ArrowUp' || e.code==='ArrowDown') && document.activeElement?.type === 'range'){
          document.activeElement.blur();
        }
        if(e.code==='Enter' || e.code==='KeyN'){ this.startOrRestart(); }

        if(e.code==='Space'){
          if(!this.running || this.gameover){ this.startOrRestart(); }
          else if(this.paused){ this.paused=false; }
          else { this.jump(true); }
          e.preventDefault();
        }
        if(e.code==='ArrowUp'){
          if(this.running && !this.paused && !this.gameover) this.jump(true);
          else if(!this.running || this.gameover) this.startOrRestart();
          e.preventDefault();
        }
        if(e.code==='ArrowDown'){ if(!this.gameover) this.player.duck=true; }
        if(e.code==='KeyU'){ if(this.running&&!this.gameover){ this.paused=!this.paused; } }
        if(e.code==='KeyI'){ this.useNextItem(); }
      });
      document.addEventListener('keyup',(e)=>{ if(e.code==='ArrowDown'){ this.player.duck=false; } });

      /* ÌÑ∞Ïπò Ï°∞Ïûë */
      const tzL = $('#tzLeft'), tzR = $('#tzRight');
      if(tzL && tzR){
        let lastTap=0, duckTouchId=null;
        const onLStart=(e)=>{ e.preventDefault(); if(this.gameover) return; this.player.duck=true; duckTouchId = (e.changedTouches? e.changedTouches[0].identifier : null); };
        const onLEnd=(e)=>{ e.preventDefault(); if(duckTouchId===null){ this.player.duck=false; return; }
          const touches=e.changedTouches||[]; for(const t of touches){ if(t.identifier===duckTouchId){ this.player.duck=false; duckTouchId=null; break; } }
        };
        tzL.addEventListener('touchstart', onLStart, {passive:false});
        tzL.addEventListener('touchend',   onLEnd,   {passive:false});
        tzL.addEventListener('touchcancel',onLEnd,   {passive:false});

        const onRStart=(e)=>{ e.preventDefault();
          const now=Date.now();
          if(now-lastTap<300){
            if(!this.running || this.gameover){ this.startOrRestart(); }
          }else{
            if(!this.running){ this.startOrRestart(); }
            else if(this.paused){ this.paused=false; }
            else { this.jump(true); }
          }
          lastTap=now;
        };
        tzR.addEventListener('touchstart', onRStart, {passive:false});
      }
    }

    _cooldownOk(){ return true; }
    startOrRestart(){ this.reset(this.level); this.running=true; this.paused=false; }

    resize(){
      const d = DPR();
      const rect = this.c.getBoundingClientRect();
      if(rect.width === 0 || rect.height === 0){
        requestAnimationFrame(()=> this.resize());
        return;
      }
      this.c.width  = Math.floor(rect.width  * d);
      this.c.height = Math.floor(rect.height * d);
    }

    setLevel(lv){ this.level=lv; this.p=paramsForLevel(lv); this.syncHUD(true); }
    syncHUD(initial=false){
      $('#score').textContent=this.score|0;
      $('#best').textContent=this.best|0;
      $('#moves').textContent=(this.spd|0);
      if(initial){ updateTicketUI(); }
    }

    itemEmoji(kind){ return kind==='speed' ? '‚ö°' : '‚ù§Ô∏è'; }
    renderInvUI(){
      const el = document.getElementById('invHudList');
      if(!el) return;
      const items = this.inv.map(k=>`<span class="slot">${this.itemEmoji(k)}</span>`).join('');
      const revive = this.revive>0 ? ` <span class="rev">‚ù§Ô∏è√ó${this.revive}</span>` : '';
      el.innerHTML = items + revive;
    }

    updatePointsUI(){
      const cap = this.pointsCap || 5000;
      $('#pointsAmt').textContent = (this.points|0).toLocaleString('ko-KR');
      const pct = Math.max(0, Math.min(100, (this.points/cap)*100));
      $('#pointsBar').style.width = pct.toFixed(1)+'%';
    }

    jump(pressed){
      if(!pressed) return;
      const p=this.player;
      if(p.y>=this.groundY){ p.vy=this.p.jumpVy; p.jumps=1; }
      else if(p.jumps<p.maxJumps){ p.vy=this.p.jumpVy*0.9; p.jumps++; }
    }

    queueItem(kind){ this.inv.push(kind); this.renderInvUI(); SFX.pickup(); }
    useNextItem(){
      if(this.inv.length===0) return;
      var kind=this.inv.shift();
      if(kind==='speed'){ this.itemInvActive=true; this.itemInvT=5.0; this.itemSpeedMult=3.0; this.flashT=0.25; }
      else if(kind==='revive'){ this.revive++; this.flashT=0.15; }
      this.renderInvUI();
    }

    jumpBands(){
      var v=Math.abs(this.p.jumpVy), g=this.p.gravity;
      var h1=(v*v)/(2*g), h2=h1*0.81;
      var lowH=clamp(h1*0.95, 30, this.groundY-40);
      var highH=clamp((h1+h2)*0.95, 60, this.groundY-60);
      return { low: this.groundY - lowH, high: this.groundY - highH };
    }

    spawn(){
      var useBird = Math.random()<this.p.birdRate;
      if(useBird){
        var alts=[this.groundY-30, this.groundY-70, this.groundY-110];
        var pattern = (Math.random()<0.4)? 'flock' : (Math.random()<0.5? 'zigzag':'solo');
        var count = pattern==='flock'? (2 + (Math.random()<0.5?1:0)) : 1;
        for(var i=0;i<count;i++){
          var alt=alts[Math.floor(Math.random()*alts.length)];
          var phase = Math.random()*Math.PI*2;
          var amp = (pattern!=='solo')? this.rand(6,16): 0;
          var zspd = (pattern!=='solo')? this.rand(2,4): 0;
          this.objs.push({t:'bird', x:this.logicalW+10 + i*36, y:alt, w:46, h:34, flap:0, amp:amp, zspd:zspd, phase:phase, counted:false});
        }
      } else {
        var n = (Math.random()<this.p.flock)? 2 + (Math.random()<0.5?1:0) : 1;
        for(var i=0;i<n;i++){
          var type = (Math.random()<0.5)? 's':'t';
          var w = type==='s'? 20: 28; var h = type==='s'? 40: 60;
          var gap = (i===0)? 0 : (this.p.lowGap + this.rand(6,18));
          var prevW = (i>0? this.objs[this.objs.length-1].w : 0);
          this.objs.push({t:'cactus', x:this.logicalW+10 + gap + prevW, y:this.groundY, w:w, h:h, counted:false});
        }
      }

      var r=Math.random(); var kind=null; if(r<0.30) kind='speed'; else if(r<0.40) kind='revive';
      if(kind){
        var bands=this.jumpBands();
        var y=(Math.random()<0.5)? bands.low : bands.high;
        this.items.push({t:'item', kind:kind, x:this.logicalW+20, y:y, r:10});
      }
    }

    collide(a,b){ return !(a.x+a.w-6 < b.x || a.x+6 > b.x+b.w || a.y < (b.y-b.h) || (a.y-a.h) > b.y); }

    awardPoints(base){
      let v = Math.max(0, Math.floor(base * ({beginner:1.00, intermediate:1.15, advanced:1.35, insane:1.60, hell:1.35, doom:1.50}[$('#tier').value]||1.0)));
      this.points = Math.min(this.pointsCap, this.points + v);
      this.updatePointsUI();
    }

    update(dt){
      if(!this.running||this.paused||this.gameover) return;

      var si=this.score|0;
      if(si>=this.milestoneScoreNext){
        const steps = Math.floor((si - (this.milestoneScoreNext-100))/100)+1;
        for(let k=0;k<steps;k++) this.awardPoints(10);
        this.milestoneScoreNext += steps*100;
        this.boostT=2.0; this.flashT=0.25; SFX.milestone();
      }

      if(this.itemInvActive){ this.itemInvT=Math.max(0, this.itemInvT-dt); if(this.itemInvT<=0){ this.itemInvActive=false; this.itemSpeedMult=1; } }
      var boost = (this.boostT>0? 60 : 0); this.boostT = Math.max(0, this.boostT-dt);
      var mult = this.itemSpeedMult||1;
      this.spd = clamp(this.spd + this.p.accel*dt, this.p.startSpd, this.p.maxSpd) * mult + boost;

      this.t += dt; this.dayT += dt;
      if(this.p.nightSec<9999){ if(this.dayT>=this.p.nightSec){ this.dayT=0; this.isNight=!this.isNight; } }

      this.nextSpawn -= dt*1000; if(this.nextSpawn<=0){ this.spawn(); this.nextSpawn = this.p.spawnMin + (Math.random()*420); }

      for(var i=0;i<this.clouds.length;i++){ var c=this.clouds[i]; c.x -= (this.spd*0.2)*dt; if(c.x<-60) { c.x=this.logicalW+Math.random()*120; c.y=this.rand(20,90);} }
      var s=this.spd*dt;
      for(i=0;i<this.objs.length;i++){ var o=this.objs[i]; o.x -= s; if(o.t==='bird'){ o.flap+=dt*10; if(o.amp){ o.phase += o.zspd*dt; o.y += Math.sin(o.phase)*o.amp*dt*10; } } }
      for(i=this.objs.length-1;i>=0;i--) if(this.objs[i].x<-80) this.objs.splice(i,1);
      for(i=0;i<this.items.length;i++){ this.items[i].x -= s; }
      for(i=this.items.length-1;i>=0;i--) if(this.items[i].x<-40) this.items.splice(i,1);

      var p=this.player; p.vy += this.p.gravity*dt; p.y = Math.min(this.groundY, p.y + p.vy*dt); if(p.y>=this.groundY){ p.vy=0; p.jumps=0; }
      p.runT += dt; p.blinkT -= dt; if(p.blinkT<=0) p.blinkT=this.rand(3,7);

      this.score += this.spd*dt*0.05; if(this.score>this.best){ this.best=this.score|0; localStorage.setItem(LS_KEYS.best, String(this.best)); }
      this.syncHUD();

      var hitBox={x:p.x, y:p.y, w:p.duck?58:44, h:p.duck?26:48};
      for(i=this.items.length-1;i>=0;i--){
        var it=this.items[i];
        var ib={x:it.x-12,y:it.y, w:24, h:24};
        if(this.collide(hitBox, ib)){
          if(it.t==='item'){ this.queueItem(it.kind); SFX.pickup(); }
          this.items.splice(i,1);
        }
      }

      const pxEdge = this.player.x - 6;
      for(i=0;i<this.objs.length;i++){
        const ob=this.objs[i];
        if(!ob.counted && (ob.x + ob.w) < pxEdge){
          ob.counted = true; this.avoided++; this.combo++; this.awardPoints(5);
          if(this.combo>0 && this.combo%10===0){ this.awardPoints(15); }
        }
      }

      if(!this.itemInvActive){
        for(i=0;i<this.objs.length;i++){
          var ob=this.objs[i]; var obBox={x:ob.x, y:ob.y, w:ob.w, h:ob.h};
          if(this.collide(hitBox, obBox)){ 
            if(this.revive>0){ this.doRevive(); break; } 
            else { this.doGameOver(); break; } 
          }
        }
      }
    }

    doRevive(){
      this.revive--;
      this.itemInvActive=true; this.itemInvT=5.0; this.itemSpeedMult=1.5; this.flashT=0.5;
      this.spawnBurst(this.player.x,this.player.y, this.isNight?'#eee':'#222');
      this.renderInvUI();
    }

    _tryMissionBonus(){
      const key=todayKey();
      const flags=loadJSON(LS_KEYS.mission,{});
      flags[key]=flags[key]||{}; flags[key].runner=true; saveJSON(LS_KEYS.mission,flags);
      const rewarded=loadJSON(LS_KEYS.missionRewarded,{});
      if(rewarded[key]) return;
      const f=flags[key];
      if(f.runner && f['2048'] && f.tetris){
        this.awardPoints(300);
        rewarded[key]=true; saveJSON(LS_KEYS.missionRewarded,rewarded);
        showToast('ÏÑ∏Ìä∏ ÎØ∏ÏÖò Î≥¥ÏÉÅ +300P!', 1800);
      }
    }

    doGameOver(){
      const leftover = (this.inv?.length||0) + (this.revive||0);
      if(leftover>0) this.awardPoints(leftover*5);
      this.gameover=true; this.running=false;
      $('#gameOver').style.display='flex';
      addRecord(this.score|0, this.points|0);
      addPlay();
      this.renderInvUI();
      this._tryMissionBonus();

      /* ‚úÖ ÏÑ∏ÏÖò Ï¢ÖÎ£å ÏïåÎ¶º */
      notifyFinish(this.score|0);
    }

    drawCharacter(ctx,x,y,duck,phase,night){
      ctx.save(); ctx.translate(x,y);
      var body = night? '#ffd1e6' : '#ff9cc2';
      var face = night? '#fff' : '#ffddea';
      var eye  = night? '#eee' : '#222';
      var h=duck?26:48; var w=duck?58:44;

      ctx.fillStyle=body; ctx.beginPath();
      var r=10; ctx.moveTo(-4,-h+r); ctx.quadraticCurveTo(-4,-h, -4+r,-h); ctx.lineTo(-4+w-r,-h); ctx.quadraticCurveTo(-4+w,-h,-4+w,-h+r);
      ctx.lineTo(-4+w,-6-r); ctx.quadraticCurveTo(-4+w,-6,-4+w-r,-6); ctx.lineTo(-4+r,-6); ctx.quadraticCurveTo(-4,-6,-4,-6-r); ctx.closePath(); ctx.fill();

      ctx.fillStyle=face; ctx.fillRect(18,-h-10, 16, 12); ctx.fillRect(30,-h-26, 6, 16); ctx.fillRect(24,-h-26, 6, 14);
      ctx.fillStyle=eye; ctx.fillRect(28, -h-6, 3, 3);
      ctx.restore();
    }
    drawCactus(ctx,x,y,w,h,night){
      ctx.save(); ctx.translate(x,y);
      var g=ctx.createRadialGradient(w*0.5,-h*0.6, Math.max(6,w*0.2), w*0.4,-h*0.6, Math.max(14,w));
      g.addColorStop(0, night? '#aab3c8' : '#8088a0');
      g.addColorStop(1, night? '#5e6578' : '#676e82');
      ctx.fillStyle=g; ctx.beginPath();
      var rx=Math.max(6, w*0.45), ry=Math.max(8, h*0.55);
      ctx.ellipse(w*0.5, -h*0.5, rx, ry, 0, 0, Math.PI*2); ctx.fill();
      ctx.strokeStyle=night? '#2f3444':'#63708a'; ctx.lineWidth=2; ctx.beginPath();
      ctx.moveTo(w*0.25, -h*0.35); ctx.lineTo(w*0.45, -h*0.2); ctx.lineTo(w*0.65, -h*0.32);
      ctx.stroke(); ctx.restore();
    }
    drawBird(ctx,x,y,flap,night){
      ctx.save(); ctx.translate(x,y);
      ctx.fillStyle= night? '#ddd':'#222';
      var wing = Math.sin(flap)*4;
      ctx.fillRect(-14,-8,28,16);
      ctx.fillRect(-18,-2+wing, 12, 4);
      ctx.fillRect(6,-2-wing, 12, 4);
      ctx.restore();
    }
    drawItem(ctx,x,y,kindOrVal,night){
      ctx.save(); ctx.translate(x,y);
      ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
      if(typeof kindOrVal === 'string'){
        const emoji = (kindOrVal==='speed') ? '‚ö°' : '‚ù§Ô∏è';
        ctx.font = '20px system-ui, "Apple SD Gothic Neo", "Segoe UI Emoji", sans-serif';
        ctx.fillText(emoji, 0, 0);
      } else {
        const size = 18;
        ctx.font = size+'px system-ui, "Apple SD Gothic Neo", "Segoe UI Emoji", sans-serif';
        ctx.fillText('üü°', 0, 0);
      }
      ctx.restore();
    }
    drawGround(ctx,offset,night){
      var y=this.groundY+2; var gH=this.logicalH - y;
      var grad=ctx.createLinearGradient(0,y,0,this.logicalH);
      grad.addColorStop(0, night? '#3a2a1e' : '#8a5a3a');
      grad.addColorStop(1, night? '#2f2318' : '#6e462c');
      ctx.fillStyle=grad; ctx.fillRect(0,y,this.logicalW,gH);
      var grass=ctx.createLinearGradient(0,y-10,0,y+6);
      grass.addColorStop(0, night? '#3b6b3b' : '#6ec36e');
      grass.addColorStop(1, night? '#2a572a' : '#4faa52');
      ctx.fillStyle=grass; ctx.fillRect(0,y-10,this.logicalW,12);
      ctx.fillStyle=night? '#2c6a2c' : '#3ea849';
      for(var i=0;i<60;i++){ var x=((i*60 - (offset%60))+this.logicalW)%this.logicalW; ctx.fillRect(x, y-12, 18, 2); }
    }
    drawHUD(ctx){
      var txt = (this.score|0).toString().padStart(5,'0') + '  HI ' + (this.best|0).toString().padStart(5,'0');
      var blink=((this.score|0)>=this.best)&&(this.gameover||this.boostT>0);
      ctx.fillStyle=this.isNight? '#eee':'#222'; ctx.font='12px ui-monospace'; ctx.textAlign='right';
      if(blink && ((performance.now()/200|0)%2===0)){ ctx.fillStyle = this.isNight? '#aaa':'#666'; }
      ctx.fillText(txt, this.logicalW-12, 18);
      if(!this.running&&!this.gameover){ ctx.textAlign='center'; ctx.fillText('SPACE/ENTER = START  |  SPACE/UP = JUMP(2x)  |  DOWN = DUCK  |  U = PAUSE  |  I = ITEM', this.logicalW/2, 60); }
      if(this.gameover){ ctx.textAlign='center'; ctx.fillText('GAME OVER  ‚Äî  PRESS SPACE/ENTER TO RESTART', this.logicalW/2, 60); }
    }
    spawnBurst(x,y,color){ this.fx=this.fx||[]; for(var i=0;i<24;i++){ this.fx.push({x:x,y:y,vx:this.rand(-140,140),vy:this.rand(-220,-60),life:this.rand(0.3,0.8),color:color}); } }
    drawFX(ctx){ this.fx=this.fx||[]; for(var i=this.fx.length-1;i>=0;i--){ var p=this.fx[i]; p.x+=p.vx*0.033; p.y+=p.vy*0.033; p.vy+=400*0.033; p.life-=0.033; if(p.life<=0){ this.fx.splice(i,1); continue; } ctx.fillStyle=p.color; ctx.fillRect(p.x,p.y,2,2); } }

    draw(){
      const ctx=this.bctx; ctx.imageSmoothingEnabled=false; ctx.clearRect(0,0,this.logicalW,this.logicalH);

      this.flashT = Math.max(0, (this.flashT||0) - 0.033);

      var sky=ctx.createLinearGradient(0,0,0,this.logicalH);
      if(this.isNight){ sky.addColorStop(0,'#0a1230'); sky.addColorStop(1,'#1a1f3f'); }
      else { sky.addColorStop(0,'#bfe8ff'); sky.addColorStop(1,'#e9f8ff'); }
      ctx.fillStyle=sky; ctx.fillRect(0,0,this.logicalW,this.logicalH);

      ctx.fillStyle=this.isNight? '#777':'#999';
      for(var i=0;i<this.clouds.length;i++){ var c=this.clouds[i]; ctx.fillRect(c.x, c.y, 28, 8); ctx.fillRect(c.x+10, c.y-6, 18, 6);} 

      this.drawGround(ctx, this.t*this.spd, this.isNight);
      for(var i=0;i<this.items.length;i++){
        var it=this.items[i];
        if(it.t==='item') this.drawItem(ctx,it.x,it.y,it.kind,this.isNight);
        else this.drawItem(ctx,it.x,it.y,it.val,this.isNight);
      }
      for(i=0;i<this.objs.length;i++){ var o=this.objs[i]; if(o.t==='cactus') this.drawCactus(ctx,o.x,o.y,o.w,o.h,this.isNight); else this.drawBird(ctx,o.x,o.y,o.flap,this.isNight); }
      this.drawCharacter(ctx, this.player.x, this.player.y, this.player.duck, this.player.runT, this.isNight);

      this.drawFX(ctx);
      if(this.flashT>0){ ctx.fillStyle=this.isNight? 'rgba(255,255,255,'+(0.25*this.flashT)+')':'rgba(0,0,0,'+(0.25*this.flashT)+')'; ctx.fillRect(0,0,this.logicalW,this.logicalH); }

      this.drawHUD(ctx);

      const mctx=this.ctx; mctx.imageSmoothingEnabled=false;
      mctx.clearRect(0,0,this.c.width,this.c.height);
      const cw=this.c.width, ch=this.c.height;
      const scale=Math.min(cw/this.logicalW, ch/this.logicalH);
      const dw=this.logicalW*scale, dh=this.logicalH*scale;
      const ox=(cw-dw)/2, oy=(ch-dh)/2;
      mctx.fillStyle='#000'; if(oy>0) { mctx.fillRect(0,0,cw,oy); mctx.fillRect(0,ch-oy,cw,oy); }
      if(ox>0) { mctx.fillRect(0,0,ox,ch); mctx.fillRect(cw-ox,0,ox,ch); }
      mctx.drawImage(this.buf, 0,0,this.logicalW,this.logicalH, ox,oy,dw,dh);
      mctx.globalAlpha=0.12; mctx.fillStyle='#000';
      for(let yy=0; yy<ch; yy+=2){ mctx.fillRect(0,yy,cw,1); }
      mctx.globalAlpha=1;
    }

    loop(){ let last=performance.now(); const step=(now)=>{ const dt=Math.min(0.033,(now-last)/1000); last=now; this.update(dt); this.draw(); requestAnimationFrame(step); }; requestAnimationFrame(step); }
  }

  const game=new Dino(document.getElementById('game'));
  (function initUI(){
    const tier=$('#tier'), lvl=$('#lvlRange');
    const applyTier=(t)=>{ let lv={beginner:1,intermediate:11,advanced:21,hell:40,doom:50,insane:100}[t]||1; lvl.value=lv; game.setLevel(lv); };
    applyTier(tier.value);
    lvl.addEventListener('input',()=> game.setLevel(+lvl.value));
    updateTicketUI();
  })();
})();

/***** Cabinet fit *****/
function fitCabinet(){
  const cab = document.querySelector('.cabinet'); if(!cab) return;
  const margin = 16;
  cab.style.transform='none';
  const w=cab.offsetWidth, h=cab.offsetHeight;
  const vw = window.innerWidth, vh = window.innerHeight;
  const needScale = (w > vw - margin*2) || (h > vh - margin*2);
  const scale = needScale ? Math.min(1, (vw - margin*2)/w, (vh - margin*2)/h) : 1;
  cab.style.transform = 'scale('+scale+')';
}
window.addEventListener('resize', ()=>requestAnimationFrame(fitCabinet), {passive:true});
window.addEventListener('orientationchange', ()=>requestAnimationFrame(fitCabinet), {passive:true});
setTimeout(fitCabinet, 0);

/***** ‚úÖ ÏÑ∏ÏÖò ÌõÖ(ÏïàÏ†Ñ ÎûòÌçº): ESM/await ÏóÜÏù¥ Ïï± ÌõÖ Ìò∏Ï∂ú *****/
function notifyStart(){ try{ if (typeof window.gameStart === 'function') window.gameStart('dino'); }catch(e){} }
function notifyFinish(finalScore){ try{ if (typeof window.gameFinish === 'function') window.gameFinish('dino', finalScore|0); }catch(e){} }

/***** Í∞ÄÏãúÏÑ± ÌõÖ *****/
document.addEventListener('visibilitychange', () => {
  if (document.hidden) {
    // ÌïÑÏöî Ïãú ÏùºÏãúÏ†ïÏßÄ, Î°úÍπÖ Îì± Ïó∞Í≤∞ ÏßÄÏ†ê
  }
});
</script>

  <div id="cookieBanner" class="cookie-banner" role="dialog" aria-live="polite" aria-label="Analytics consent">
    <div>Do you agree with the use of analysis (cookie) to improve service quality?</div>
    <div class="spacer"></div>
    <button class="deny" type="button">Refusal</button>
    <button class="agree" type="button">Consent</button>
  </div>


  <script>
  (function(){
    try{
      var KEY='rg_analytics_consent';
      function init(){ if(typeof window.analyticsInit==='function') window.analyticsInit(); }
      var v=null; try{ v=localStorage.getItem(KEY); }catch(e){}
      var el=document.getElementById('cookieBanner');
      if(v==='yes'){ init(); if(el) el.style.display='none'; return; }
      if(!el){ return; } // no banner -> do not init
      el.style.display='flex';
      var agree=el.querySelector('.agree'), deny=el.querySelector('.deny');
      if(agree) agree.addEventListener('click', function(){
        try{ localStorage.setItem(KEY,'yes'); }catch(e){}
        el.style.display='none'; init();
      });
      if(deny) deny.addEventListener('click', function(){
        try{ localStorage.setItem(KEY,'no'); }catch(e){}
        el.style.display='none';
      });
    }catch(e){ /* no-op */ }
  })();
  </script>

  
  <div id="site-footer"></div>
</body>
</html>
