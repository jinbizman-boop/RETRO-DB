<!DOCTYPE html>
<html lang="ko" data-env="prod">
<head>
  <!-- SEO / OG (ê¸°ì¡´ ìœ ì§€) -->
  <meta name="description" content="íšŒì›ê°€ì… â€” SNS ë˜ëŠ” ì¼ë°˜ íšŒì›ê°€ì…ìœ¼ë¡œ ë³´ìƒ ì‹œìŠ¤í…œì„ ê²½í—˜í•˜ì„¸ìš”.">
  <meta property="og:title" content="íšŒì›ê°€ì… â€“ RETRO GAMES">
  <meta property="og:description" content="íšŒì›ê°€ì… â€” SNS ë˜ëŠ” ì¼ë°˜ íšŒì›ê°€ì…ìœ¼ë¡œ ë³´ìƒ ì‹œìŠ¤í…œì„ ê²½í—˜í•˜ì„¸ìš”.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://retrogames.kr/">
  <meta property="og:image" content="https://retrogames.kr/assets/og-cover.png">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">
  <link rel="alternate icon" href="/favicon.ico">

  <!-- ê¸°ë³¸ -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <title>íšŒì›ê°€ì… â€“ RETRO GAMES</title>

  <style>
    :root{
      /* ì»¬ëŸ¬ */
      --gold1:#ffdf6e;--gold2:#ffb84d;--blue1:#2b7bff;--bg:#0b001e;
      --n:#03C75A;--k:#FEE500;
      /* ì•ˆì „ ì—¬ë°±(ë…¸ì¹˜) */
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-right: env(safe-area-inset-right, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --safe-left: env(safe-area-inset-left, 0px);
      /* ìœ ë™ ì¹˜ìˆ˜ */
      --container:max(340px, min(1000px, 94vw));
      --panel-radius:24px;
      --gap:clamp(14px, 2.2vw, 22px);
    }
    *{box-sizing:border-box}
    html,body{
      height:100%;margin:0;
      background:radial-gradient(circle at 40% -10%,#320076,#0b001e 70%);
      font-family:'Segoe UI',system-ui,Apple SD Gothic Neo,sans-serif;color:#fff;
      -webkit-text-size-adjust:100%; text-size-adjust:100%;
    }
    body{padding:var(--safe-top) var(--safe-right) var(--safe-bottom) var(--safe-left)}

    /* ìƒë‹¨ ì‚¬ì´íŠ¸ë§µ/ë§í¬ ë¦¬ìŠ¤íŠ¸ê°€ ì£¼ì…ë˜ë”ë¼ë„ ì™„ì „ ìˆ¨ê¹€ */
    #site-header, .site-map, nav.site-map, .top-nav, .site-nav { display:none !important; }

    .wrap{min-height:100%;display:grid;grid-template-rows:auto 1fr auto}

    header{
      position:relative;text-align:center;
      padding:clamp(16px,2vw,22px) clamp(12px,2vw,16px);
    }
    .title{
      font-size:clamp(28px,3.2vw,36px);
      font-weight:900;letter-spacing:.5px;color:var(--gold1);
      text-shadow:0 0 18px var(--gold2); line-height:1.15;
    }
    .subtitle{
      opacity:.9;margin:6px 0 0;
      font-size:clamp(13px, 1.6vw, 16px);
    }
    .actions{
      position:absolute;right:clamp(12px,2.4vw,16px);top:50%;transform:translateY(-50%);
      display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end;max-width:min(48vw, 420px);
    }
    .btn-top{
      padding:8px 14px;border-radius:12px;border:1px solid #3e2b7b;
      background:linear-gradient(180deg,#1a2b7a,#0a1a64);
      font-weight:900;color:#e9f0ff;box-shadow:0 6px 12px #0006;cursor:pointer;
      font-size:clamp(12px,1.2vw,14px)
    }
    .btn-top.alt{background:linear-gradient(180deg,var(--gold1),var(--gold2));color:#3a2400}

    .divider{
      height:4px;width:100%;
      background:linear-gradient(90deg,transparent,rgba(0,136,255,.8),transparent);
      filter:blur(1px);box-shadow:0 0 18px #0088ff88;margin:10px 0
    }

    main{display:grid;place-items:center;padding:24px 16px}
    .panel{
      width:var(--container);
      background:rgba(2,0,20,.55);
      border:2px solid #3e2b7b;border-radius:var(--panel-radius);
      box-shadow:0 0 30px #0008,inset 0 0 20px #2a0085;
      padding:clamp(18px,2.4vw,28px);
      transform:translateY(clamp(-26px,-3.4vw,-44px));
    }
    .panel h2{
      margin:0 0 16px;font-size:clamp(20px,2vw,22px);
      font-weight:800;color:var(--gold1);text-shadow:0 0 10px #bf8
    }

    .grid{display:grid;gap:var(--gap)}
    /* ì¢Œ(ê°„í¸ê°€ì…) : ìš°(ì¼ë°˜ê°€ì…) ë¹„ìœ¨ â€” í° í™”ë©´ì—ì„œë§Œ ë¶„ë¦¬ */
    @media (min-width:980px){ .grid{grid-template-columns:1fr 1.35fr;align-items:start} }

    .card{
      background:rgba(10,0,40,.35);border:1px solid #3e2b7b;border-radius:16px;
      padding:clamp(14px,1.8vw,18px)
    }
    .hint{opacity:.86;font-size:clamp(13px,1.4vw,14px);margin-bottom:12px}

    .socials{display:grid;gap:14px}
    .sbtn{
      display:flex;align-items:center;gap:14px;
      padding:clamp(12px,1.8vw,14px) clamp(14px,2.2vw,16px);
      border-radius:12px;border:none;font-weight:800;
      font-size:clamp(16px,1.8vw,18px);
      cursor:pointer;color:#fff;box-shadow:0 8px 16px rgba(0,0,0,.35);
      transition:transform .08s ease, box-shadow .12s ease; touch-action:manipulation;
    }
    .sbtn:focus-visible{outline:3px solid #fff8;outline-offset:2px}
    .sbtn:hover{transform:translateY(-2px);box-shadow:0 10px 18px rgba(0,0,0,.45)}
    .sbtn svg{width:28px;height:28px}
    .sbtn.kakao{background:var(--k);color:#111}
    .sbtn.naver{background:var(--n)}

    form{display:grid;gap:12px}
    label{display:grid;gap:6px;font-weight:700;font-size:clamp(13px,1.4vw,14px)}
    input[type="text"],input[type="password"],input[type="email"],input[type="date"],input[type="tel"],select{
      padding:12px 12px;border-radius:10px;border:1px solid #3e2b7b;
      background:rgba(0,0,0,.35);color:#fff;font-size:clamp(14px,1.6vw,15px)
    }
    fieldset{border:1px dashed #3e2b7b;border-radius:12px;padding:12px}
    legend{padding:0 6px;font-weight:800;color:#e9f0ff;opacity:.9}

    .row{display:grid;gap:12px}
    @media (min-width:560px){
      .row2{grid-template-columns:1fr 1fr}
      .row3{grid-template-columns:1fr 1fr 1fr}
      .row4{grid-template-columns:1fr 1fr 1fr 1fr}
    }

    .submit{
      padding:12px 16px;border-radius:12px;border:1px solid #3e2b7b;
      background:linear-gradient(180deg,#1a2b7a,#0a1a64);font-weight:900;color:#e9f0ff;
      box-shadow:0 6px 12px #0006;cursor:pointer
    }
    .submit:hover{filter:brightness(1.06)}
    .msg{min-height:18px;font-size:13px;opacity:.95}
    .ok{color:#9be59b}.err{color:#ffb4b4}

    footer{padding:12px 16px;text-align:center;color:#aab;opacity:.9;font-size:12px}

    .cookie-banner{
      position:fixed;left:12px;right:12px;bottom:12px;
      display:none;align-items:center;gap:10px;padding:10px 12px;border-radius:12px;
      border:1px solid #2b3f8f;background:linear-gradient(180deg,#0b1f40,#0a1730);
      box-shadow:0 10px 18px rgba(0,0,0,.45),inset 0 0 18px rgba(255,255,255,.05);
      z-index:10000;font-size:12px
    }
    .cookie-banner .spacer{flex:1}
    .cookie-banner button{
      padding:8px 12px;border-radius:10px;border:1px solid #2d3690;
      background:linear-gradient(180deg,#1a2b7a,#0a1730);font-weight:800;color:#e9f0ff;cursor:pointer
    }
    .cookie-banner .agree{background:linear-gradient(180deg,#ffdf6e,#ffb84d);color:#3a2400;border-color:#7a5600}

    /* ë™ì‘ ì¤„ì´ê¸°/ê³ ëŒ€ë¹„ ì ‘ê·¼ì„± */
    @media (prefers-reduced-motion: reduce){
      .sbtn{transition:none}.sbtn:hover{transform:none}
    }
    @media (prefers-contrast: more){ .hint{opacity:1} }

    /* ì‘ì€ í™”ë©´ì—ì„œ ìƒë‹¨ ë²„íŠ¼ ì¤„ë°”ê¿ˆ ë° í—¤ë” ì•ˆì „ ì—¬ë°± */
    @media (max-width:860px){
      .actions{position:static;transform:none;justify-content:center;margin-top:8px}
      header{padding-top:calc(clamp(16px,2vw,22px) + var(--safe-top))}
    }
  </style>
</head>

<!-- ì „ì—­ ìŠ¤í¬ë¦½íŠ¸ (ê¸°ì¡´ ìœ ì§€) -->
<script defer src="assets/js/app.js"></script>
<script defer src="assets/js/analytics.js"></script>

<body>
  <!-- ìƒë‹¨ ì‚¬ì´íŠ¸ë§µ ì£¼ì… ì§€ì  ì œê±° -->
  <!-- <div id="site-header"></div> -->

  <div class="wrap">
    <header>
      <div class="title">ğŸ® RETRO GAMES</div>
      <div class="subtitle">SNS ë˜ëŠ” ì¼ë°˜ íšŒì›ê°€ì…</div>
      <div class="actions">
        <button class="btn-top" onclick="goHomeSafe()">í™ˆìœ¼ë¡œ</button>
        <button class="btn-top alt" onclick="goLoginSafe()">ë¡œê·¸ì¸</button>
      </div>
    </header>
    <div class="divider"></div>

    <main>
      <section class="panel" aria-labelledby="join-title">
        <h2 id="join-title">íšŒì›ê°€ì…</h2>
        <div class="grid">
          <!-- ê°„í¸ íšŒì›ê°€ì… -->
          <div class="card">
            <p class="hint">ë„¤ì´ë²„ ë˜ëŠ” ì¹´ì¹´ì˜¤ ê³„ì •ìœ¼ë¡œ ê°„í¸ íšŒì›ê°€ì…í•˜ì„¸ìš”.</p>
            <div class="socials">
              <button class="sbtn naver" aria-label="ë„¤ì´ë²„ íšŒì›ê°€ì…" onclick="startOAuth('naver','signup')">
                <svg viewBox="0 0 24 24" fill="#fff" aria-hidden="true"><path d="M4 4h6.7l3.3 4.7V4H20v16h-6.7L10 15.3V20H4V4z"/></svg>
                ë„¤ì´ë²„ íšŒì›ê°€ì…
              </button>
              <button class="sbtn kakao" aria-label="ì¹´ì¹´ì˜¤í†¡ íšŒì›ê°€ì…" onclick="startOAuth('kakao','signup')">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="#3B1E1E" d="M12 3.5c-5 0-9 3-9 6.6 0 2.5 1.8 4.7 4.6 5.7l-.7 3.1c-.1.5.4.8.8.5l3.6-2.5c.5 0 1 .1 1.6.1 5 0 9-3 9-6.6S17 3.5 12 3.5z"/></svg>
                ì¹´ì¹´ì˜¤í†¡ íšŒì›ê°€ì…
              </button>
            </div>
          </div>

          <!-- ì¼ë°˜ íšŒì›ê°€ì… -->
          <div class="card">
            <p class="hint">ì•„ë˜ í•­ëª©ì„ ì…ë ¥í•´ ì¼ë°˜ íšŒì›ê°€ì…ì„ ì§„í–‰í•˜ì„¸ìš”.</p>
            <form id="signupForm" novalidate>
              <div class="row row2">
                <label>ì•„ì´ë””
                  <input type="text" name="username" autocomplete="username" required minlength="3" maxlength="30" placeholder="ì˜ë¬¸/ìˆ«ì 3~30ì">
                </label>
                <label>ì´ë©”ì¼ ì£¼ì†Œ
                  <input type="email" name="email" autocomplete="email" required placeholder="you@example.com">
                </label>
              </div>

              <div class="row row2">
                <label>ë¹„ë°€ë²ˆí˜¸
                  <input type="password" name="password" autocomplete="new-password" required minlength="6" maxlength="64" placeholder="ì˜ë¬¸/ìˆ«ì 6ì ì´ìƒ">
                </label>
                <label>ë¹„ë°€ë²ˆí˜¸ í™•ì¸
                  <input type="password" name="passwordConfirm" autocomplete="new-password" required minlength="6" maxlength="64" placeholder="ë‹¤ì‹œ ì…ë ¥">
                </label>
              </div>

              <fieldset>
                <legend>ê¸°ë³¸ ì •ë³´</legend>
                <div class="row row3">
                  <label>ì„±ë³„
                    <select name="gender" required>
                      <option value="">ì„ íƒ</option>
                      <option value="male">ë‚¨ì„±</option>
                      <option value="female">ì—¬ì„±</option>
                      <option value="other">ê¸°íƒ€/ì„ íƒì•ˆí•¨</option>
                    </select>
                  </label>
                  <label>ìƒë…„ì›”ì¼
                    <input type="date" name="birth" required>
                  </label>
                  <label>í•¸ë“œí° ë²ˆí˜¸
                    <!-- HTML patternì—ì„œë„ ë‹¨ì¼ ë°±ìŠ¬ë˜ì‹œ ì‚¬ìš© -->
                    <input type="tel" name="phone" required inputmode="tel" placeholder="010-1234-5678" pattern="^0\d{1,2}-?\d{3,4}-?\d{4}$">
                  </label>
                </div>
              </fieldset>

              <label style="gap:10px;align-items:center;grid-auto-flow:column;justify-content:start">
                <input type="checkbox" name="agree" required> ì´ìš©ì•½ê´€ ë° ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ì— ë™ì˜í•©ë‹ˆë‹¤.
              </label>

              <button class="submit" type="submit">íšŒì›ê°€ì…</button>
              <div id="signupMsg" class="msg" aria-live="polite"></div>
            </form>
          </div>
        </div>
      </section>
    </main>

    <div class="divider"></div>
    <footer>Â©2025 ì§„ë¹„ì¦ˆ ë§¤ë‹ˆì§€ë¨¼íŠ¸ â”ƒ ê´‘ê³ ë¬¸ì˜ jinbizman@gmail.com â”ƒ RETRO GAMES Â· Neon UI â”ƒ MADE BY ONLY OPEN AI</footer>
  </div>

  <!-- ì¿ í‚¤ ë™ì˜ ë°°ë„ˆ -->
  <div id="cookieBanner" class="cookie-banner" role="dialog" aria-live="polite" aria-label="Analytics consent">
    <div>ì„œë¹„ìŠ¤ í’ˆì§ˆ í–¥ìƒì„ ìœ„í•œ ë¶„ì„(ì¿ í‚¤) ì‚¬ìš©ì— ë™ì˜í•˜ì‹œë‚˜ìš”?</div>
    <div class="spacer"></div>
    <button class="deny" type="button">ê±°ë¶€</button>
    <button class="agree" type="button">ë™ì˜</button>
  </div>

  <script>
    const BASE = "/";
    function goHomeSafe(){ if (window.goHome) return window.goHome(); location.href = BASE + "index.html"; }
    function goLoginSafe(){ if (window.goLogin) return window.goLogin(); location.href = BASE + "login.html"; }

    // OAuth
    function startOAuth(provider, mode){
      const url = `/auth/oauth/${provider}?mode=${encodeURIComponent(mode||'signup')}`;
      location.href = url;
    }

    // ì¼ë°˜ íšŒì›ê°€ì…
    const $form = document.getElementById('signupForm');
    const $msg  = document.getElementById('signupMsg');

    function samePwd(p, c){ return p && c && p === c; }

    $form.addEventListener('submit', async (e) => {
      e.preventDefault();
      $msg.textContent = '';

      const fd = new FormData($form);
      const rawPhone = (fd.get('phone') || '').toString();

      const payload = {
        username: (fd.get('username')||'').toString().trim(),
        email:    (fd.get('email')||'').toString().trim(),
        password: (fd.get('password')||'').toString(),
        gender:   (fd.get('gender')||'').toString(),
        birth:    (fd.get('birth')||'').toString(),
        // ìˆ«ìë§Œ ì¶”ì¶œ: \D ë¥¼ ì‚¬ìš©
        phone:    rawPhone.replace(/\D/g,''),
        agree:    !!fd.get('agree')
      };

      // ê¸°ë³¸ ê²€ì¦
      if (payload.username.length < 3){
        return fail('ì•„ì´ë””ëŠ” 3ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
      }

      // ì´ë©”ì¼ í˜•ì‹ ê²€ì¦: \s ì‚¬ìš© (ê³µë°± ì œì™¸)
      if (!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(payload.email)){
        return fail('ì´ë©”ì¼ í˜•ì‹ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
      }

      if (payload.password.length < 6){
        return fail('ë¹„ë°€ë²ˆí˜¸ëŠ” 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
      }

      if (!samePwd(fd.get('password'), fd.get('passwordConfirm'))){
        return fail('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
      }

      if (!payload.gender){
        return fail('ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
      }

      if (!payload.birth){
        return fail('ìƒë…„ì›”ì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
      }

      // íœ´ëŒ€í° ë²ˆí˜¸: 0ìœ¼ë¡œ ì‹œì‘ + ì´ 9~11ìë¦¬ (01012345678 í˜•íƒœ)
      if (!payload.phone.match(/^0\d{8,10}$/)){
        return fail('í•¸ë“œí° ë²ˆí˜¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”. ì˜ˆ: 01012345678');
      }

      if (!payload.agree){
        return fail('ì•½ê´€ ë™ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.');
      }

      try{
        const res = await fetch('/auth/local/signup', {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify(payload),
          credentials: 'include'
        });

        if (!res.ok){
          const t = await res.text();
          throw new Error(t || 'íšŒì›ê°€ì… ì‹¤íŒ¨');
        }

        $msg.textContent = 'ê°€ì… ì™„ë£Œ! ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.';
        $msg.className  = 'msg ok';
        setTimeout(()=>{ location.href = BASE + 'login.html'; }, 800);
      }catch(err){
        fail('íšŒì›ê°€ì… ì‹¤íŒ¨: ' + (err.message || 'ì„œë²„ ì˜¤ë¥˜'));
      }
    });

    function fail(t){
      $msg.textContent = t;
      $msg.className   = 'msg err';
      return false;
    }

    // Cookie consent
    (function(){
      try{
        var KEY = 'rg_analytics_consent';
        function init(){ if(typeof window.analyticsInit==='function') window.analyticsInit(); }
        var v = null; try{ v = localStorage.getItem(KEY); }catch(e){}
        var el = document.getElementById('cookieBanner');
        if (v === 'yes'){ init(); if(el) el.style.display='none'; return; }
        if (!el){ return; }
        el.style.display = 'flex';
        var agree = el.querySelector('.agree'), deny = el.querySelector('.deny');
        if (agree) agree.addEventListener('click', function(){
          try{ localStorage.setItem(KEY,'yes'); }catch(e){}
          el.style.display='none'; init();
        });
        if (deny) deny.addEventListener('click', function(){
          try{ localStorage.setItem(KEY,'no'); }catch(e){}
          el.style.display='none';
        });
      }catch(e){}
    })();
  </script>

  <!-- í•˜ë‹¨ í‘¸í„° ì£¼ì… ì§€ì (ìœ ì§€) -->
  <div id="site-footer"></div>
  <script defer src="/assets/js/consent.js"></script>
</body>
</html>
