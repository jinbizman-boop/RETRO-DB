<!DOCTYPE html>
<html lang="ko" data-env="production" data-analytics="on">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <!-- Google AdSense ì†Œìœ ê¶Œ í™•ì¸ ë©”íƒ€ íƒœê·¸ -->
  <meta name="google-adsense-account" content="ca-pub-6713974265397310">
  <title>RETRO 2048 â€“ Arcade Cabinet</title>

  <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">
  <link rel="alternate icon" href="/favicon.ico">

  <!-- === Common SEO/A11y (auto-inserted) === -->
  <link rel="icon" href="/assets/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/icon-180.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#0e1b34">
  <meta name="description" content="RETRO 2048 â€“ Arcade Cabinet | ë ˆíŠ¸ë¡œ ê°ì„± ë¯¸ë‹ˆê²Œì„ì„ ì¦ê¸°ëŠ” RETRO GAMES">
  <meta name="robots" content="index,follow">
  <meta property="og:site_name" content="RETRO GAMES">
  <meta property="og:title" content="RETRO 2048 â€“ Arcade Cabinet">
  <meta property="og:description" content="RETRO 2048 â€“ Arcade Cabinet | ë ˆíŠ¸ë¡œ ê°ì„± ë¯¸ë‹ˆê²Œì„ì„ ì¦ê¸°ëŠ” RETRO GAMES">
  <meta property="og:type" content="website">
  <meta property="og:image" content="/assets/og/retro-games-card.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="RETRO 2048 â€“ Arcade Cabinet">
  <meta name="twitter:description" content="RETRO 2048 â€“ Arcade Cabinet | ë ˆíŠ¸ë¡œ ê°ì„± ë¯¸ë‹ˆê²Œì„ì„ ì¦ê¸°ëŠ” RETRO GAMES">
  <meta name="twitter:image" content="/assets/og/retro-games-card.png">

  <script>
    // fixed environment flags for analytics/runtime
    (function(d){
      d.documentElement.dataset.env = 'production';
      d.documentElement.dataset.analytics = 'on';
      window.__ENV__ = 'production';
      window.__ANALYTICS_ON__ = true;
    })(document);

    // âœ… ê²Œì„ í˜ì´ì§€: app.jsì˜ í—¤ë”/í‘¸í„° ì˜¤í†  ì¸ì íŠ¸ë¥¼ ë¹„í™œì„±í™”í•˜ëŠ” í”Œë˜ê·¸ (retro-runningê³¼ ë™ì¼)
    window.__RG_SKIP_PARTIALS__ = true;
  </script>
  <!-- === /Common SEO/A11y === -->

  <!-- AdSense ê¸€ë¡œë²Œ ìŠ¤í¬ë¦½íŠ¸ (ì²¨ë¶€ëœ ì •ìƒ ë…¸ì¶œ ì˜ˆì‹œì™€ ë™ì¼ í˜•íƒœ) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6713974265397310"
     crossorigin="anonymous"></script>

  <!-- ì „ì—­ ìœ í‹¸ (ì •ìƒ app.js ë²„ì „ ì‚¬ìš©) -->
  <script defer src="/assets/js/app.js"></script>
  <script defer src="/assets/js/analytics.js"></script>
  <!-- ë ˆê±°ì‹œ ê²Œì„ ìŠ¤í¬ë¦½íŠ¸ ì˜ì¡´ ì œê±°: /assets/js/games/2048.jsëŠ” ë” ì´ìƒ ë¡œë“œí•˜ì§€ ì•ŠìŒ -->
  
  <style>
    :root{
      --cabinet:#071933; --cabinet2:#0b2a57; --bezel:#0c1e3f; --glow:#0ea5ff; --side:#f4be09;
      --btn:#133262; --btnBorder:#285dd1; --btnFg:#e9f1ff;
      --board:#121a2f; --tile0:#e9eef6; --ink:#111;
      --t2:#e7f4ff; --t4:#d6eaff; --t8:#ffe7c2; --t16:#ffd6a6; --t32:#ffc8a6; --t64:#ffb79c;
      --t128:#fff3a8; --t256:#fff09a; --t512:#ffeb8a; --t1024:#eaff9c; --t2048:#caffb0; --t4096:#b6ffd2; --t8192:#b2fff0;
    }
    *{box-sizing:border-box}
    html,body{
      height:100%;margin:0;background:radial-gradient(circle at 40% -10%,#320076,#0b001e 70%);
      color:#fff;font-family:'Pretendard',ui-sans-serif,system-ui,"Segoe UI",Roboto,"Apple SD Gothic Neo";
      overflow:hidden
    }
    /* í—ˆë¸Œ ìˆ¨ê¹€ */
    .wrap{display:none !important;}

    #fx{position:fixed;inset:0;pointer-events:none;z-index:0;opacity:.75}
    .shell{
      min-height:100vh;
      display:grid;
      place-items:center;
      padding:20px;
      position:relative;
      z-index:1;
      padding-bottom:calc(20px + env(safe-area-inset-bottom,0));
    }

    /* === ì¢Œìš° ì„¸ë¡œí˜• ê´‘ê³  ë°°ë„ˆ ë ˆì´ì•„ì›ƒ === */
    .cabinetLayout{
      display:grid;
      grid-template-columns:160px minmax(0,1fr) 160px;
      align-items:stretch;
      gap:16px;
      width:100%;
      max-width:1500px;
      margin:0 auto;
      transform-origin:center center;
    }
    .sideAd{
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .sideAdInner{
      width:160px;
      max-width:100%;
      min-height:600px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .sideAdInner .adsbygoogle{
      display:block;
      width:100%;
      height:100%;
    }
    @media (max-width:1100px){
      .cabinetLayout{
        grid-template-columns:minmax(0,1fr);
      }
      .sideAd{
        display:none;
      }
    }

    /* Cabinet */
    .cabinet{
      position:relative;
      width:min(1200px,96vw);
      background:#0e1b34;
      border-radius:18px;
      box-shadow:0 12px 40px rgba(0,0,0,.65),inset 0 0 0 2px #0a1a33;
      transform-origin:top center
    }
    .cabinet:before,.cabinet:after{
      content:"";
      position:absolute;top:12px;bottom:12px;width:18px;
      background:linear-gradient(180deg,#ffd34a,#f0b400 60%,#d99a00);
      filter:drop-shadow(0 0 12px rgba(255,190,0,.55));
    }
    .cabinet:before{left:12px;border-radius:9px}
    .cabinet:after{right:12px;border-radius:9px}

    .marquee{
      padding:18px;
      border-radius:18px 18px 0 0;
      background:linear-gradient(180deg,#173763,#0b2548);
      border-bottom:1px solid #0c2b59;
      box-shadow:inset 0 -6px 26px rgba(0,0,0,.35)
    }
    .title{display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap}
    .title h1{
      margin:0;font-weight:900;letter-spacing:2px;color:#eaf3ff;
      text-shadow:0 0 12px rgba(62,142,255,.55);
      font-size:clamp(18px,4.4vw,28px)
    }
    .subtitle{opacity:.75;letter-spacing:.2em;font-size:clamp(10px,2.7vw,12px);text-align:center}

    /* === Global HUD (í†µí•© DOM, app.js ì „ì—­ HUDì™€ ì¼ì¹˜) === */
    #rg-hud.hud-bar{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      justify-content:center;
      padding:10px 18px 4px;
      font-size:12px;
    }
    .hud-bar .hud-item{
      min-width:90px;
      padding:4px 12px;
      border-radius:999px;
      background:rgba(6,18,50,.9);
      border:1px solid rgba(71,120,255,.75);
      box-shadow:0 6px 14px rgba(0,0,0,.45);
      text-align:center;
      letter-spacing:.05em;
      white-space:nowrap;
    }
    .hud-bar .hud-item span[data-hud]{
      margin-left:4px;
      font-weight:800;
      color:#ffdf6e;
      text-shadow:0 0 6px rgba(255,223,110,.7);
    }

    /* HUD (2048 ì „ìš© ì¸ê²Œì„ HUD) */
    .hud{display:flex;gap:12px;padding:12px;justify-content:center;flex-wrap:wrap}
    .chip,.pill,.hud .btnMini{
      position:relative;min-width:128px;height:46px;padding:0 16px;border-radius:14px;border:1px solid #1e63ff;color:#fff;font-weight:900;display:inline-flex;align-items:center;justify-content:center;letter-spacing:.3px;
      background:linear-gradient(180deg,#8fe0ff 0%,#49a8ff 26%,#2f84ff 58%,#1560f2 100%),radial-gradient(140% 120% at 20% -40%,rgba(255,255,255,.65),rgba(255,255,255,0) 55%);
      box-shadow:0 12px 18px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.5), inset 0 -8px 14px rgba(0,0,0,.28);
      touch-action:manipulation;
    }
    .chip b{color:#fff;font-weight:900;padding-left:6px;text-shadow:0 1px 0 rgba(0,0,0,.25)}
    .pill{min-width:260px;gap:12px}
    .pill .icon{
      width:28px;height:28px;display:grid;place-items:center;border-radius:50%;
      background:radial-gradient(circle at 30% 30%,#ffffff,#d8f1ff);
      color:#0b2a57;
      box-shadow:inset 0 -4px 8px rgba(0,0,0,.25), 0 0 10px rgba(255,255,255,.65)
    }
    .points .bar,.tickets .bar{
      height:8px;border-radius:999px;background:#1a2548;
      overflow:hidden;border:1px solid #2b3f8f;width:120px
    }
    .points .bar>span,.tickets .bar>span{
      display:block;height:100%;width:0%;
      background:linear-gradient(90deg,#b86cff,#6af0ff);
      box-shadow:0 0 10px #8ad7ff
    }
    .points .nums,.tickets .nums{display:flex;align-items:baseline;gap:8px;font-weight:900}
    .points .nums .big,.tickets .nums .big{font-size:18px;color:#ffe9a3;text-shadow:0 0 8px #ffd86a}
    .points .nums .cap,.tickets .nums .cap{opacity:.8;font-size:12px}
    .playCount{font-size:12px;opacity:.85;margin-left:6px}

    /* Screen */
    .play{
      position:relative;
      margin:10px 18px;
      border-radius:16px;
      background:linear-gradient(180deg,#0a1530,#031125);
      box-shadow:inset 0 0 0 1px #0b2a57,inset 0 0 60px rgba(0,0,0,.55)
    }
    .screen{
      aspect-ratio:16/9;
      display:grid;
      place-items:center;
      padding:18px
    }
    .bezel{
      width:100%;height:100%;border-radius:14px;
      background:radial-gradient(120% 200% at 50% -60%,rgba(255,255,255,.07),rgba(255,255,255,0) 40%),linear-gradient(180deg,#0a1c39,#0a1326);
      box-shadow:inset 0 0 0 1px #132a59,inset 0 0 60px rgba(0,0,0,.65);
      display:grid;place-items:center;overflow:hidden
    }

    /* â˜… í”Œë ˆì´ í™”ë©´ ì´íƒˆ ë°©ì§€: ìº”ë²„ìŠ¤ê°€ í•­ìƒ ë² ì ¤ ì•ˆì— ë§ê²Œ ì¤‘ì•™ ì •ë ¬ë˜ë„ë¡ ìˆ˜ì • */
    .canvasWrap{
      width:100%;
      height:100%;
      max-width:980px;
      max-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    canvas#game{
      display:block;
      max-width:100%;
      max-height:100%;
      width:auto;
      height:auto;
      aspect-ratio:1/1;
      background:var(--tile0);
      border-radius:18px;border:1px solid #1b2b45;
      box-shadow:inset 0 0 40px rgba(0,0,0,.25)
    }

    /* Deck */
    .deck{
      display:flex;gap:12px;flex-wrap:wrap;justify-content:center;
      padding:14px 18px 22px;
      border-top:1px solid #0a2b57;
      background:linear-gradient(180deg,#0b1f40,#0a1730)
    }
    .deck .btn,.deck select,.deck input[type=range]{
      font-weight:900;color:#dff1ff;
      background:linear-gradient(180deg,#1b3a7a,#102a66);
      border:1px solid #224aa8;border-radius:12px;
      padding:10px 14px;
      box-shadow:0 10px 18px rgba(0,0,0,.45),inset 0 0 18px rgba(255,255,255,.05);
      cursor:pointer;touch-action:manipulation
    }
    .deck .btn:hover,.deck select:hover{filter:brightness(1.06)}
    .deck label{display:flex;align-items:center;gap:8px}
    .deck input[type=range]{width:140px;height:12px;accent-color:#5fb0ff}

    /* Records Modal */
    #recModal{
      display:none;position:fixed;inset:0;
      background:rgba(5,0,20,.55);
      backdrop-filter:blur(4px);
      align-items:center;justify-content:center;
      z-index:999
    }
    /* Ad Modal */
    #adModal{
      display:none;position:fixed;inset:0;
      background:rgba(0,0,0,.65);
      backdrop-filter:blur(2px);
      align-items:center;justify-content:center;
      z-index:1000
    }
    #adBox{
      width:min(680px,92vw);min-height:280px;
      background:radial-gradient(circle at 50% -60%,#1f0d48,#0c0626 70%);
      border:2px solid #3e2b7b;border-radius:20px;
      box-shadow:0 30px 60px #000a,inset 0 0 24px #2a0085;
      padding:18px;display:flex;flex-direction:column;gap:10px
    }
    #adHead{display:flex;justify-content:space-between;align-items:center}
    #adClose{border:0;background:#1b2b7a;color:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}
    .adPlaceholder{
      display:grid;place-items:center;height:220px;
      border-radius:14px;
      background:linear-gradient(135deg,#18224a,#0e1636);
      border:1px dashed #3952c3
    }

    /* ===== Mobile Responsive ===== */
    @media (max-width: 980px){
      .shell{padding:12px;padding-bottom:calc(12px + env(safe-area-inset-bottom,0))}
      .cabinet{width:100vw;border-radius:0}
      .marquee{padding:12px;border-radius:0}
      .play{margin:8px 12px}
      .screen{padding:10px}
      .hud{gap:8px;padding:10px}
      .chip,.pill,.hud .btnMini{min-width:112px;height:42px;padding:0 12px}
      .pill{min-width:220px}
      .deck{gap:8px;padding:10px 12px 16px}
      .deck .btn,.deck select,.deck input[type=range]{padding:10px 12px}
      #rg-hud.hud-bar{padding:8px 10px 2px}
    }
    @media (max-width: 640px){
      .hud{padding:8px}
      .chip,.pill,.hud .btnMini{height:40px}
      .points .nums .big,.tickets .nums .big{font-size:16px}
      .points .bar,.tickets .bar{width:96px}
      .deck{justify-content:flex-start;overflow:auto;-webkit-overflow-scrolling:touch}
      .deck > *{flex:0 0 auto}
      .hud-bar .hud-item{min-width:78px;padding:3px 10px}
    }

    .cookie-banner{
      position:fixed;left:12px;right:12px;bottom:12px;
      display:none;align-items:center;gap:10px;padding:10px 12px;border-radius:12px;
      border:1px solid #2b3f8f;background:linear-gradient(180deg,#0b1f40,#0a1730);
      box-shadow:0 10px 18px rgba(0,0,0,.45),inset 0 0 18px rgba(255,255,255,.05);
      z-index:10000;font-size:12px
    }
    .cookie-banner .spacer{flex:1}
    .cookie-banner button{
      padding:8px 12px;border-radius:10px;border:1px solid #2d3690;
      background:linear-gradient(180deg,#1a2b7a,#0a1a64);font-weight:800;color:#e9f0ff;cursor:pointer
    }
    .cookie-banner .agree{background:linear-gradient(180deg,#ffdf6e,#ffb84d);color:#3a2400;border-color:#7a5600}
  </style>
</head>

<body data-rg-skip-autoinject="1">
  <!-- ê²Œì„ í˜ì´ì§€ëŠ” header/footer íŒŒì…œì„ ì§ì ‘ include í•˜ì§€ ì•ŠìŒ (app.js ì˜¤í†  ì¸ì íŠ¸ëŠ” ì¼ë°˜ í˜ì´ì§€ì—ì„œë§Œ ì‚¬ìš©) -->

  <canvas id="fx"></canvas>

  <!-- 2048 ì „ìš© ë°°ê²½ ìŒì•… (loop, volume 30%) -->
  <audio id="bgm2048" src="/assets/music/2048-background.mp3" loop preload="auto"></audio>

  <div class="shell">
    <div class="cabinetLayout">
      <!-- ì¢Œì¸¡ ì„¸ë¡œ ê´‘ê³  ë°°ë„ˆ (retro-running ê³¼ ë™ì¼í•œ êµ¬ì¡°ë¡œ ë³µì›) -->
      <aside class="sideAd sideAd-left" aria-label="left vertical ad">
        <div class="sideAdInner">
          <ins class="adsbygoogle"
               style="display:block"
               data-ad-client="ca-pub-6713974265397310"
               data-ad-slot="4514999077"
               data-ad-format="auto"
               data-full-width-responsive="true"></ins>
          <script>
            (window.adsbygoogle = window.adsbygoogle || []).push({});
          </script>
        </div>
      </aside>

      <!-- ì•„ì¼€ì´ë“œ ìºë¹„ë‹› -->
      <section class="cabinet" aria-label="retro arcade cabinet">
        <header class="marquee">
          <div class="title">
            <h1>RETRO 2048</h1>
            <div class="subtitle">SWIPE Â· ARROWS Â· WASD</div>
          </div>
        </header>

        <!-- âœ… Global Player HUD (í†µí•© DOM â€“ app.jsì—ì„œ ë‹¨ì¼ ë¡œì§ìœ¼ë¡œ ê°±ì‹ ) -->
        <div id="rg-hud" class="hud-bar requires-auth" aria-label="player status HUD">
          <span class="hud-item hud-level">
            LV. <span data-hud="level">-</span>
          </span>
          <span class="hud-item hud-exp">
            EXP <span data-hud="exp">-</span>
          </span>
          <span class="hud-item hud-coins">
            Coins <span data-hud="coins">-</span>
          </span>
          <span class="hud-item hud-tickets">
            Tickets <span data-hud="tickets">-</span>
          </span>
          <span class="hud-item hud-games">
            Plays <span data-hud="gamesPlayed">-</span>
          </span>
        </div>

        <!-- 2048 In-game HUD (ê¸°ì¡´ UI/UX ìœ ì§€) -->
        <div class="hud">
          <div class="chip">ì ìˆ˜ <b id="score">0</b></div>
          <div class="chip">ìµœê³  <b id="best">0</b></div>
          <div class="chip">ì´ë™ <b id="moves">0</b></div>

          <!-- Points (í†µí•© XP ê¸°ë°˜ / app.js HUDì™€ ë°ì´í„° ì¼ì¹˜) -->
          <div class="pill points" aria-label="ì‚¬ìš©ì í¬ì¸íŠ¸">
            <div class="icon">ğŸ…</div>
            <div>
              <div class="nums">
                <span class="big" id="pointsAmt" data-user-points>0</span>
                <span class="cap">/ <span id="pointsCap">20,000</span></span>
              </div>
              <div class="bar"><span id="pointsBar"></span></div>
            </div>
          </div>

          <!-- Tickets (í†µí•© í‹°ì¼“ ê¸°ë°˜ / app.js HUDì™€ ë°ì´í„° ì¼ì¹˜) -->
          <div class="pill tickets" aria-label="í‹°ì¼“ ì§„í–‰">
            <div class="icon">ğŸŸï¸</div>
            <div>
              <div class="nums">
                <span class="big" id="ticketsAmt" data-user-tickets>0</span>
                <span class="cap">í‹°ì¼“</span>
              </div>
              <div class="bar"><span id="ticketsBar"></span></div>
            </div>
            <div class="playCount" id="ticketsCap">0 / 10</div>
          </div>

          <button class="btnMini" id="recordsBtn" aria-label="ë‚´ ê²Œì„ ê¸°ë¡">MY RECORDS</button>
        </div>

        <main class="play">
          <div class="screen">
            <div class="bezel">
              <div class="canvasWrap" id="canvasWrap">
                <canvas id="game"></canvas>
              </div>
            </div>
          </div>
        </main>

        <!-- Control deck -->
        <div class="deck">
          <button class="btn" id="homeBtn">HOME</button>
          <button class="btn" id="newBtn">ìƒˆ ê²Œì„ (N)</button>
          <button class="btn" id="undoBtn">ë˜ëŒë¦¬ê¸° (U)</button>
          <label>ëª¨ë“œ
            <select id="tier">
              <option value="beginner">ì´ˆê¸‰ (1â€“10)</option>
              <option value="intermediate">ì¤‘ê¸‰ (11â€“20)</option>
              <option value="advanced">ê³ ê¸‰ (21â€“30)</option>
              <option value="hell">ì§€ì˜¥ (40)</option>
              <option value="doom">íŒŒë©¸ (50)</option>
              <option value="insane">ê·¹ì•…ë¬´ë„ (100)</option>
            </select>
          </label>
          <label>ë ˆë²¨ <input id="lvlRange" type="range" min="1" max="100" value="1" step="1"></label>
          <label>ë³´ë“œ
            <select id="sizeSel">
              <option value="4">4Ã—4</option>
              <option value="5">5Ã—5</option>
              <option value="6">6Ã—6</option>
            </select>
          </label>
          <button class="btn" id="endBtn">ê²Œì„ ì¢…ë£Œ</button>
        </div>
      </section>

      <!-- ìš°ì¸¡ ì„¸ë¡œ ê´‘ê³  ë°°ë„ˆ (retro-running ê³¼ ë™ì¼í•œ êµ¬ì¡°ë¡œ ë³µì›) -->
      <aside class="sideAd sideAd-right" aria-label="right vertical ad">
        <div class="sideAdInner">
          <ins class="adsbygoogle"
               style="display:block"
               data-ad-client="ca-pub-6713974265397310"
               data-ad-slot="4514999077"
               data-ad-format="auto"
               data-full-width-responsive="true"></ins>
          <script>
            (window.adsbygoogle = window.adsbygoogle || []).push({});
          </script>
        </div>
      </aside>
    </div>
  </div>

  <!-- Records Modal -->
  <div id="recModal">
    <div style="width:min(640px,94vw);background:radial-gradient(circle at 50% -60%,#1f0d48,#0c0626 70%);border:2px solid #3e2b7b;border-radius:20px;box-shadow:0 30px 60px #000a,inset 0 0 24px #2a0085;padding:22px">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <h3 style="margin:0;color:#ffdf6e">ë‚´ ê²Œì„ ê¸°ë¡</h3>
        <button id="recClose" style="border:0;background:transparent;color:#fff;font-size:22px;cursor:pointer">Ã—</button>
      </div>
      <div id="recBody" style="max-height:60vh;overflow:auto;border:1px solid #2a3a89;border-radius:12px;padding:8px"></div>
    </div>
  </div>

  <!-- Ad Modal -->
  <div id="adModal" role="dialog" aria-modal="true" aria-labelledby="adTitle">
    <div id="adBox">
      <div id="adHead">
        <h3 id="adTitle" style="margin:0;color:#ffdf6e">ê´‘ê³ </h3>
        <button id="adClose">ë‹«ê¸°</button>
      </div>
      <div id="adContainer" class="adPlaceholder">
        <div style="text-align:center;opacity:.9">
          <div style="font-weight:900;margin-bottom:6px">ì—¬ê¸°ì— ê´‘ê³ ê°€ í‘œì‹œë©ë‹ˆë‹¤</div>
          <div style="font-size:12px;opacity:.8">ê°œë°œ/í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í”Œë ˆì´ìŠ¤í™€ë”ê°€ ë³´ì…ë‹ˆë‹¤</div>
        </div>
      </div>
    </div>
  </div>

  <script>
  /* ====== AdSense (ì—°ë™) ====== */
  const AD_CLIENT = 'ca-pub-6713974265397310';
  const AD_SLOT   = '4514999077'; // ì²¨ë¶€ëœ ì •ìƒ ë…¸ì¶œ ì˜ˆì‹œì™€ ë™ì¼í•œ ê´‘ê³  ë‹¨ìœ„ ID

  function fallbackAdHTML(){
    return '<div class="adPlaceholder" style="height:220px;display:grid;place-items:center"><div style="text-align:center"><div style="font-weight:900;margin-bottom:6px">Ad Placeholder</div><div style="font-size:12px;opacity:.8">AdSense ì„¤ì • í›„ ì‹¤ì œ ê´‘ê³ ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div></div></div>';
  }
  function showInterstitialAd(){
    const box=document.getElementById('adContainer'); 
    if(!box) return;
    box.innerHTML='';
    const ins=document.createElement('ins');
    ins.className='adsbygoogle';
    ins.style.display='block';
    ins.setAttribute('data-ad-client', AD_CLIENT);
    if(AD_SLOT) ins.setAttribute('data-ad-slot', AD_SLOT);
    ins.setAttribute('data-ad-format','auto');
    ins.setAttribute('data-full-width-responsive','true');
    box.appendChild(ins);
    try{
      (window.adsbygoogle=window.adsbygoogle||[]).push({});
    }catch(e){
      console.warn(e);
      box.innerHTML = fallbackAdHTML();
    }
    document.getElementById('adModal').style.display='flex';
  }
  let _afterAd=null;
  function showAdThen(fn){ _afterAd = (typeof fn==='function') ? fn : null; showInterstitialAd(); }
  document.getElementById('adClose').addEventListener('click',()=>{
    document.getElementById('adModal').style.display='none';
    const f=_afterAd; _afterAd=null; if(f) try{ f(); }catch(e){ console.error(e); }
  });

  /* ===== Neon background (stars) ===== */
  (function(){ const c=document.getElementById('fx'); if(!c) return; const g=c.getContext('2d');
    function fit(){const d=window.devicePixelRatio||1; c.width=innerWidth*d; c.height=innerHeight*d; g.setTransform(d,0,0,d,0,0);} fit(); addEventListener('resize',fit,{passive:true});
    const N=80; const pts=new Array(N).fill(0).map(()=>({x:Math.random()*innerWidth,y:Math.random()*innerHeight*0.9,r:Math.random()*2+0.5,s:Math.random()*0.6+0.2,ph:Math.random()*6.283}));
    function loop(t){ g.clearRect(0,0,c.width,c.height); for(const p of pts){ g.beginPath(); g.arc(p.x,p.y,p.r,0,Math.PI*2); const a=0.3+Math.sin(t*0.002+p.ph)*0.25; g.fillStyle=`rgba(43,123,255,${a})`; g.fill(); p.y+=p.s; if(p.y>innerHeight){p.y=-10; p.x=Math.random()*innerWidth;} } requestAnimationFrame(loop);} requestAnimationFrame(loop);
  })();

  /* ===== Helpers ===== */
  const $=sel=>document.querySelector(sel);
  const DPR=()=> Math.min(2, window.devicePixelRatio||1);
  const clamp=(n,a,b)=> Math.max(a, Math.min(b,n));
  const pick=(arr)=> arr[Math.floor(Math.random()*arr.length)];
  const fmt=n=> Number(n).toLocaleString('ko-KR');

  function difficultyMult(){
    const val=$('#tier')?.value||'beginner';
    return {beginner:1.00, intermediate:1.12, advanced:1.28, hell:1.45, doom:1.60, insane:1.80}[val]||1.0;
  }

  function paramsForLevel(lv){
    const p4 = clamp(0.10 + lv*0.01, 0.10, 0.45);
    const p8 = lv<12? 0 : clamp((lv-10)*0.006, 0, 0.25);
    const p16= lv<25? 0 : clamp((lv-24)*0.004, 0, 0.10);
    const evil= clamp(lv*0.012, 0, 1.0);
    const dbl = clamp((lv-8)*0.008, 0, 0.40);
    const undos = Math.max(0, 20 - Math.floor(lv/5));
    return {p4,p8,p16,evil,doubleSpawn:dbl,undos};
  }

  /* 
    ğŸ”¹ 2048 ì „ìš© ê²Œì„ ë³´ìƒ ê³„ì‚°ê¸°
    - score: ìµœì¢… ì ìˆ˜
    - points: ì¸ê²Œì„ í¬ì¸íŠ¸(awardPointsë¡œ ëˆ„ì ëœ ê°’)
    - maxTile: ìµœëŒ€ë¡œ ë§Œë“  íƒ€ì¼ (2048, 4096 ë“±)
    - level: ë‚œì´ë„/ë ˆë²¨
    - ë°˜í™˜: { xp, tickets, coins }
      â€¢ coins  â†’ ì„œë²„ ì§€ê°‘ì˜ ì½”ì¸/í¬ì¸íŠ¸(delta.coins)ë¡œ ì‚¬ìš©
      â€¢ xp     â†’ delta.xp ë¡œ ì‚¬ìš©
      â€¢ ticketsâ†’ delta.tickets ë¡œ ì‚¬ìš©
  */
  function calcReward(score, points, maxTile, level){
    const safeScore   = Math.max(0, score|0);
    const safeLevel   = Math.max(1, level|0);
    const safeTile    = Math.max(2, maxTile|0);
    const mult        = difficultyMult();

    // ê¸°ë³¸ ê²½í—˜ì¹˜: ì ìˆ˜ ê¸°ë°˜
    let baseXp = Math.floor(safeScore / 50);
    // ë ˆë²¨ ë³´ë„ˆìŠ¤
    baseXp += safeLevel * 2;
    // ìµœëŒ€ íƒ€ì¼ ë³´ë„ˆìŠ¤
    if (safeTile >= 4096)      baseXp += 160;
    else if (safeTile >= 2048) baseXp += 80;
    else if (safeTile >= 1024) baseXp += 40;
    else if (safeTile >= 512)  baseXp += 20;
    // ë‚œì´ë„ ë°°ìˆ˜ ì ìš©
    let xp = Math.floor(baseXp * mult);
    xp = clamp(xp, 0, 8000);

    // ì½”ì¸ì€ ì¸ê²Œì„ pointsë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë˜, ì ìˆ˜ ê¸°ë°˜ìœ¼ë¡œ ì•½ê°„ ë³´ì •
    const scoreBonusCoins = Math.floor(safeScore / 200);
    let coins = (points|0) + scoreBonusCoins;
    coins = clamp(coins, 0, 10000);

    // í‹°ì¼“: ë†’ì€ ë‚œì´ë„/ê³ ë“ì ì— ëŒ€í•´ 0~5ì¥ ì •ë„ ì°¨ë“± ì§€ê¸‰
    let tickets = 0;
    if (safeScore >= 3000 || safeTile >= 1024) tickets = 1;
    if (safeScore >= 6000 || safeTile >= 2048) tickets = 2;
    if (safeScore >= 12000 || safeTile >= 4096) tickets = 3;
    const tier = $('#tier')?.value || 'beginner';
    if (tier === 'hell' || tier === 'doom') tickets += 1;
    if (tier === 'insane') tickets += 2;
    tickets = clamp(tickets, 0, 5);

    return { xp, tickets, coins };
  }

  /* âœ… ì „ì—­ í—ˆë¸Œ ê·œê²© í†µì¼ í—¬í¼ (retro-running ê³¼ ë™ì¼ êµ¬ì¡°)
     - gameCode: '2048', 'retro-running', 'brick-breaker' ë“± ê²Œì„ ID
     - delta   : { xp, tickets, coins } (ë³´ìƒëŸ‰)
     - meta    : { score, points, level, ... } (ê²Œì„ë³„ ë©”íƒ€ ì •ë³´)
   */
  function applyGlobalRewardAndSyncWallet(gameCode, delta, meta){
    try{
      const d = delta || {};
      const m = meta  || {};

      if (typeof window.sendGameReward === 'function'){
        window.sendGameReward(gameCode, {
          score:   m.score  || 0,
          points:  m.points || 0,
          exp:     d.xp     || 0,
          tickets: d.tickets|| 0,
          level:   m.level  || 0,
          meta:    m
        });
      }

      if (typeof window.refreshWalletHUD === 'function'){
        window.refreshWalletHUD();
      }
    }catch(e){
      console.warn('[2048] applyGlobalRewardAndSyncWallet error:', e);
    }
  }

  const LS_KEYS={
    plays:'plays2048',
    tickets:'tickets2048',
    records:'records2048',
    best:'best2048',
    mission:'daily_mission_flags',          // runnerì™€ ë™ì¼ í‚¤ë¡œ ë¯¸ì…˜ í”Œë˜ê·¸ ê³µìœ 
    missionRewarded:'daily_mission_rewarded'
  };
  function loadJSON(k,def){try{const v=localStorage.getItem(k); return v? JSON.parse(v): def;}catch{ return def; }}
  function saveJSON(k,v){localStorage.setItem(k, JSON.stringify(v));}
  function updateTicketUI(){
    const plays= +localStorage.getItem(LS_KEYS.plays)||0;
    const capLabel = $('#ticketsCap');
    if(capLabel){
      capLabel.textContent = `${plays%10} / 10`;
    }
    const tickets = +localStorage.getItem(LS_KEYS.tickets)||0;
    const tAmtEl = $('#ticketsAmt');
    const tBarEl = $('#ticketsBar');
    if(tAmtEl) tAmtEl.textContent = fmt(tickets);
    if(tBarEl){
      const prog = (plays%10)/10*100;
      tBarEl.style.width = clamp(prog,0,100) + '%';
    }
  }
  function addPlay(){
    let plays= +localStorage.getItem(LS_KEYS.plays)||0; plays++;
    let tickets= +localStorage.getItem(LS_KEYS.tickets)||0;
    if(plays%10===0) tickets++;
    localStorage.setItem(LS_KEYS.plays, String(plays));
    localStorage.setItem(LS_KEYS.tickets, String(tickets));
    updateTicketUI();
    if(plays % 3 === 0){ showInterstitialAd(); }
  }
  function addRecord(score, points){
    const recs=loadJSON(LS_KEYS.records,[]);
    const now=new Date(); recs.unshift({ts:now.toISOString(), score, points});
    saveJSON(LS_KEYS.records,recs.slice(0,200));
  }
  function showRecords(){
    const recs=loadJSON(LS_KEYS.records,[]);
    const wrap=$('#recBody');
    wrap.innerHTML = `<table style="width:100%;border-collapse:collapse;font-size:13px">
      <thead><tr><th style='text-align:left;padding:8px;border-bottom:1px solid #314099'>ë‚ ì§œ/ì‹œê°„</th><th style='text-align:right;padding:8px;border-bottom:1px solid #314099'>ì ìˆ˜</th><th style='text-align:right;padding:8px;border-bottom:1px solid #314099'>í¬ì¸íŠ¸</th></tr></thead>
      <tbody>
        ${recs.map(r=>{ const d=new Date(r.ts); const date=d.toLocaleString('ko-KR');
          return `<tr><td style='padding:6px 8px;border-bottom:1px solid #233077'>${date}</td><td style='padding:6px 8px;text-align:right;border-bottom:1px solid #233077'>${fmt(r.score||0)}</td><td style='padding:6px 8px;text-align:right;border-bottom:1px solid #233077'>${fmt(r.points||0)}</td></tr>`}).join('')}
      </tbody>
    </table>`;
    $('#recModal').style.display='flex';
  }
  (function bindRecordModal(){
    const btn = $('#recordsBtn');
    if(btn) btn.addEventListener('click', showRecords);
    const close = $('#recClose');
    if(close) close.addEventListener('click',()=> $('#recModal').style.display='none');
    const modal = $('#recModal');
    if(modal) modal.addEventListener('click',e=>{ if(e.target.id==='recModal') $('#recModal').style.display='none'; });
  })();

  // âœ… ì¼ì¼ ì„¸íŠ¸ ë¯¸ì…˜ í”Œë˜ê·¸ (runnerì™€ ë™ì¼ êµ¬ì¡° â€“ analytics êµ¬ì¡° í†µì¼ìš©)
  function todayKey(){ return new Date().toISOString().slice(0,10); }
  function tryDailyMissionBonus2048(){
    try{
      const key = todayKey();
      const flags = loadJSON(LS_KEYS.mission, {});
      flags[key] = flags[key] || {};
      flags[key]['2048'] = true;
      saveJSON(LS_KEYS.mission, flags);

      const rewarded = loadJSON(LS_KEYS.missionRewarded, {});
      if (rewarded[key]) return;
      const f = flags[key];
      if (f && f.runner && f['2048'] && f.tetris){
        // ì„¸íŠ¸ ë¯¸ì…˜ ë³´ìƒì€ ê³„ì • ì§€ê°‘ ë³´ìƒ(calcReward/applyGlobalReward)ë¡œë„ ë“¤ì–´ê°€ë¯€ë¡œ
        // ì—¬ê¸°ì„œëŠ” ë¡œì»¬ í¬ì¸íŠ¸ë§Œ ì‚´ì§ ë³´ë„ˆìŠ¤ë¡œ ë¶€ì—¬
        // (HUD ë™ê¸°í™”ëŠ” syncHUD ì—ì„œ ìë™ ë°˜ì˜)
        console.info('[2048] daily mission completed (runner + 2048 + tetris)');
        rewarded[key] = true;
        saveJSON(LS_KEYS.missionRewarded, rewarded);
      }
    }catch(e){
      console.warn('daily mission bonus error', e);
    }
  }

  function notifyStart(){ try{ if (typeof window.gameStart === 'function') window.gameStart('2048'); }catch(e){} }
  function notifyFinish(finalScore, meta){ 
    try{ 
      if (typeof window.gameFinish === 'function') 
        window.gameFinish('2048', finalScore|0, meta||null); 
    }catch(e){} 
  }
  document.addEventListener('visibilitychange', () => {});

  class G2048{
    constructor(canvas, opts={}){
      this.c=canvas;
      this.ctx=canvas.getContext('2d');
      this.size=4;
      this.testMode = !!opts.testMode;

      this.grid = this.makeGrid(this.size);

      this.best= +(localStorage.getItem(LS_KEYS.best)||0);
      this.score=0;
      this.moves=0;
      this.points=0;
      this._ended=false;

      this.bind();
      this._initResizeObserver();
      this.resize();

      if(this.testMode){
        this.reset(1);
        this.draw();
        return;
      }

      this.reset(1);
      this.draw();
      notifyStart();
    }

    reset(level){
      this.level=level||1;
      this.p=paramsForLevel(this.level);
      this.best= +(localStorage.getItem(LS_KEYS.best)||0);
      this.score=0;
      this.moves=0;
      this.undosLeft=this.p.undos;
      this.history=[];
      this.points=0;
      this._ended=false;
      this._scoreMilestone = 0;
      this._tileBonusGiven = {512:false,1024:false,2048:false,4096:false};

      this.grid=this.makeGrid(this.size);
      this.spawn(); this.spawn();
      this.draw();
      this.syncHUD();
    }

    setSize(n){ this.size=n; this.reset(this.level); }
    makeGrid(n){ return Array.from({length:n},()=> Array.from({length:n},()=>0)); }

    bind(){
      $('#homeBtn').onclick = () => showAdThen(()=> {
        window.location.href = '/user-retro-games.html';
      });

      $('#endBtn').onclick =()=> showAdThen(()=> this.manualEnd(true));
      $('#newBtn').onclick=()=>{
        if(this.moves>0){ addRecord(this.score,this.points||0); }
        this.reset(this.level);
      };
      $('#undoBtn').onclick=()=> this.undo();
      const tier=$('#tier'); const lvl=$('#lvlRange'); const sizeSel=$('#sizeSel');
      const applyTier=t=>{ let lv={beginner:1,intermediate:11,advanced:21,hell:40,doom:50,insane:100}[t]||1; lvl.value=lv; this.setLevel(lv); };
      tier.addEventListener('change',()=>applyTier(tier.value));
      lvl.addEventListener('input',()=> this.setLevel(+lvl.value));
      sizeSel.addEventListener('change',()=> this.setSize(+sizeSel.value));

      const keyMap={ArrowLeft:'L',ArrowRight:'R',ArrowUp:'U',ArrowDown:'D',KeyA:'L',KeyD:'R',KeyW:'U',KeyS:'D'};
      document.addEventListener('keydown',(e)=>{
        if(e.code==='KeyN'){
          if(this.moves>0){ addRecord(this.score,this.points||0);}
          this.reset(this.level);
        }
        if(e.code==='KeyU'){ this.undo(); }
        const d=keyMap[e.code]; if(d){ this.move(d); e.preventDefault(); }
      });
      let sx=0, sy=0; this.c.addEventListener('touchstart',e=>{ const t=e.changedTouches[0]; sx=t.clientX; sy=t.clientY; },{passive:true});
      this.c.addEventListener('touchend',e=>{ const t=e.changedTouches[0]; const dx=t.clientX-sx, dy=t.clientY-sy; const ax=Math.abs(dx), ay=Math.abs(dy); if(Math.max(ax,ay)<20) return; this.move( ax>ay? (dx<0?'L':'R') : (dy<0?'U':'D') ); });
    }

    setLevel(lv){ this.level=lv; this.p=paramsForLevel(lv); this.syncHUD(); }

    _initResizeObserver(){
      const wrap = this.c.parentElement || this.c;
      let lastW = 0;

      if (typeof ResizeObserver === 'undefined') {
        this.resize();
        return;
      }

      const ro = new ResizeObserver((entries)=>{
        const cr = entries[0].contentRect;
        const w = Math.floor(cr.width);
        if(w !== lastW){
          lastW = w;
          cancelAnimationFrame(this._rafId);
          this._rafId = requestAnimationFrame(()=> this.resize());
        }
      });
      ro.observe(wrap);
      this._ro = ro;
      window.addEventListener('orientationchange', ()=> this.resize(), {passive:true});
      window.addEventListener('resize', ()=> this.resize(), {passive:true});
    }

    resize(){
      const bezel = this.c.closest('.bezel') || this.c.parentElement || this.c;
      const rect = bezel.getBoundingClientRect();
      const availW = Math.max(0, rect.width - 2);
      const availH = Math.max(0, rect.height - 2);
      const SCALE = 0.98; // ì‚´ì§ ì—¬ìœ ë¥¼ ì¤˜ì„œ ë² ì ¤ ì•ˆì—ì„œ í•­ìƒ ì•ˆì „í•˜ê²Œ ë³´ì´ê²Œ
      const sideCSS = Math.floor(Math.min(availW, availH) * SCALE);
      const d = DPR();

      this.c.style.width  = sideCSS + 'px';
      this.c.style.height = sideCSS + 'px';
      this.c.width  = Math.floor(sideCSS * d);
      this.c.height = Math.floor(sideCSS * d);

      this.draw();
      fitCabinet();
    }

    randEmpty(){ const empty=[]; for(let r=0;r<this.size;r++)for(let c=0;c<this.size;c++) if(!this.grid[r][c]) empty.push([r,c]); return empty; }

    spawn(){
      let count = Math.random()<this.p.doubleSpawn? 2: 1;
      for(let k=0;k<count;k++){
        const empty=this.randEmpty(); if(empty.length===0) return;
        const r=Math.random(); let v=2; if(r<this.p.p16) v=16; else if(r<this.p.p16+this.p.p8) v=8; else if(r<this.p.p16+this.p.p8+this.p.p4) v=4;
        const pos = this.pickSpawnCell(empty, v, this.p.evil);
        const [rr,cc]=pos; this.grid[rr][cc]=v;
      }
    }

    pickSpawnCell(cells, value, evil){
      if(evil<=0 || cells.length===1) return pick(cells);
      const l = evil; let best=null, bestScore=-Infinity;
      for(const [r,c] of cells){
        const sRand = Math.random()*0.01;
        const sMob = - this.mobilityIfPlace(r,c,value);
        const sMerge = - this.mergePotentialAround(r,c,value);
        const score = l*(sMob + sMerge) + (1-l)*sRand;
        if(score>bestScore){ bestScore=score; best=[r,c]; }
      }
      return best||pick(cells);
    }
    neighbors(r,c){ return [[r-1,c],[r+1,c],[r,c-1],[r,c+1]].filter(([y,x])=> y>=0&&y<this.size&&x>=0&&x<this.size); }
    mergePotentialAround(r,c,v){ let s=0; for(const [y,x] of this.neighbors(r,c)){ if(this.grid[y][x]===v) s++; } return s; }
    mobilityIfPlace(r,c,v){ let emptyAdj=0, equalAdj=0; for(const [y,x] of this.neighbors(r,c)){ const t=this.grid[y][x]; if(!t) emptyAdj++; else if(t===v) equalAdj++; } return emptyAdj + 0.5*equalAdj; }

    storeHistory(){ if(this.undosLeft<=0) return; const snapshot={grid:this.grid.map(r=>r.slice()), score:this.score, moves:this.moves, points:this.points, scoreMilestone:this._scoreMilestone, tileBonusGiven:this._tileBonusGiven}; this.history.push(snapshot); if(this.history.length>50) this.history.shift(); }
    undo(){ if(this.history.length===0||this.undosLeft<=0) return; const s=this.history.pop(); this.grid=s.grid; this.score=s.score; this.moves=s.moves; this.points=s.points||0; this._scoreMilestone=s.scoreMilestone||0; this._tileBonusGiven=s.tileBonusGiven||this._tileBonusGiven; this.undosLeft--; this.syncHUD(); this.draw(); }

    awardPoints(base){
      const mult = difficultyMult();
      const add = Math.max(0, Math.floor(base * mult));
      this.points = Math.min(5000, (this.points||0) + add);
    }
    _awardScoreMilestones(){
      const blocks = Math.floor((this.score|0)/100);
      if(blocks>this._scoreMilestone){
        const diff = blocks - this._scoreMilestone;
        this._scoreMilestone = blocks;
        this.awardPoints(6 * diff);
      }
    }
    _awardTileMilestone(maxTile){
      const map = [{t:512,p:30},{t:1024,p:60},{t:2048,p:120},{t:4096,p:240}];
      for(const {t,p} of map){
        if(maxTile>=t && !this._tileBonusGiven[t]){
          this._tileBonusGiven[t]=true;
          this.awardPoints(p);
        }
      }
    }
    _snapshotBonusAtEnd(maxTile){
      if(maxTile>=2048) this.awardPoints(200);
      else if(maxTile>=1024) this.awardPoints(80);
    }

    move(dir){
      if(this._ended) return;
      this.storeHistory();
      const before=JSON.stringify(this.grid);
      let gained=0; const N=this.size; const idxs=[...Array(N).keys()];
      const get=(r,c)=>this.grid[r][c];
      const set=(r,c,v)=>{ this.grid[r][c]=v; };

      const compress=line=>{
        const arr=line.filter(v=>v!==0);
        for(let i=0;i<arr.length-1;i++){
          if(arr[i]!==0 && arr[i]===arr[i+1]){ arr[i]*=2; gained+=arr[i]; arr[i+1]=0; i++; }
        }
        const out=arr.filter(v=>v!==0); while(out.length<N) out.push(0); return out;
      };

      if(dir==='L' || dir==='R'){
        idxs.forEach(r=>{ let line = idxs.map(c=> get(r,c)); if(dir==='R') line.reverse(); line = compress(line); if(dir==='R') line.reverse(); idxs.forEach(c=> set(r,c,line[c])); });
      } else {
        idxs.forEach(c=>{ let line = idxs.map(r=> get(r,c)); if(dir==='D') line.reverse(); line = compress(line); if(dir==='D') line.reverse(); idxs.forEach(r=> set(r,c,line[r])); });
      }

      const after=JSON.stringify(this.grid);
      const moved = (before!==after);
      if(moved){
        this.score += gained; this.best=Math.max(this.best,this.score); localStorage.setItem(LS_KEYS.best, String(this.best));
        this.moves++;
        this._awardScoreMilestones();
        this._awardTileMilestone(this.maxTile());

        this.spawn(); this.syncHUD(); this.draw();
        if(this.isGameOver()){ this.manualEnd(false); }
      }
    }

    manualEnd(isManual){
      if(this._ended) return;
      this._ended=true;
      const maxT = this.maxTile();
      const finalScore = this.score|0;

      this._snapshotBonusAtEnd(maxT);
      this.syncHUD();
      addRecord(finalScore, this.points||0);
      addPlay();

      // âœ… ì„¸íŠ¸ ë¯¸ì…˜ í”Œë˜ê·¸ ì—…ë°ì´íŠ¸ (analytics êµ¬ì¡° í†µì¼)
      tryDailyMissionBonus2048();

      // HUD ë™ê¸°í™”ìš© ë©”íƒ€ ê¸°ë³¸ ê°’ ê³„ì‚° (í”Œë ˆì´ íƒ€ì„ ë“± í™•ì¥ ì—¬ì§€)
      const tierVal = ($('#tier') && $('#tier').value) || 'beginner';
      const boardSize = this.size;
      const playsLocal = +localStorage.getItem(LS_KEYS.plays)||0;
      const ticketsLocal = +localStorage.getItem(LS_KEYS.tickets)||0;

      if(this.testMode) return;

      // âœ… í†µí•© ë³´ìƒ íë¦„: retro-running ê³¼ ë™ì¼ êµ¬ì¡°ì˜ applyGlobalRewardAndSyncWallet ì‚¬ìš©
      let delta = { xp:0, tickets:0, coins:0 };
      try{
        delta = calcReward(finalScore, this.points||0, maxT, this.level||1) || delta;
      }catch(e){
        console.error('calcReward error', e);
      }

      const walletPoints = delta.coins | 0; // ì„œë²„ ì§€ê°‘ í¬ì¸íŠ¸

      // ğŸ” meta í•„ë“œ í™•ì¥: analytics/í—ˆë¸Œì—ì„œ ê³µí†µìœ¼ë¡œ ì“°ì¼ ìˆ˜ ìˆë„ë¡ ëª¨ë“  ìƒíƒœë¥¼ ì •ë¦¬
      const meta = {
        gameId: '2048',
        score:   finalScore,
        points:  walletPoints,
        level:   this.level || 1,
        maxTile: maxT,
        moves:   this.moves | 0,
        boardSize,
        boardType: `${boardSize}x${boardSize}`,
        tier: tierVal,
        // ë¡œì»¬(ë¸Œë¼ìš°ì €) ê¸°ë¡
        localPlays: playsLocal,
        localTickets: ticketsLocal,
        localPointsInGame: this.points||0,
        // ì¢…ë£Œ ì •ë³´
        endedAt: new Date().toISOString(),
        endedBy: isManual ? 'manual' : 'gameover'
      };

      try{
        applyGlobalRewardAndSyncWallet('2048', delta, meta);
      }catch(e){
        console.error('reward sync error', e);
      }

      // âœ… ì„¸ì…˜ ì¢…ë£Œ ì•Œë¦¼ (analytics êµ¬ì¡° í†µì¼: meta ê°™ì´ ì „ë‹¬)
      notifyFinish(finalScore, meta);

      this.flash('Game Over');
    }

    maxTile(){
      let m=0; for(const row of this.grid) for(const v of row) if(v>m) m=v; return m;
    }

    isGameOver(){
      if(this.randEmpty().length>0) return false;
      const N=this.size;
      for(let r=0;r<N;r++)for(let c=0;c<N;c++){
        const v=this.grid[r][c]; if((r+1<N && this.grid[r+1][c]===v) || (c+1<N && this.grid[r][c+1]===v)) return false;
      }
      return true;
    }

    syncHUD(){
      $('#score').textContent = fmt(this.score||0);
      $('#best').textContent  = fmt(this.best||0);
      $('#moves').textContent = fmt(this.moves||0);

      const points = this.points||0;
      const capEl = $('#pointsCap');
      const amtEl = $('#pointsAmt');
      const barEl = $('#pointsBar');
      const cap = 20000;
      if(capEl) capEl.textContent = fmt(cap);
      if(amtEl) amtEl.textContent = fmt(points);
      if(barEl) barEl.style.width = clamp(points/cap*100,0,100)+'%';

      // í‹°ì¼“ ë°”(ë¡œì»¬ ê¸°ë¡ ê¸°ì¤€) â€“ ì„œë²„ ì§€ê°‘ê³¼ëŠ” ë³„ë„
      updateTicketUI();
    }

    draw(){
      if(!this.grid) return;

      const ctx=this.ctx;
      const W=this.c.width, H=this.c.height;
      ctx.clearRect(0,0,W,H);

      const pad = 16*DPR();
      const n   = this.size;
      const gap = 10*DPR();
      const radius = 12*DPR();

      // ë³´ë“œê°€ í•­ìƒ ì •ì‚¬ê°í˜•ìœ¼ë¡œ ì¤‘ì•™ ì •ë ¬ë˜ë„ë¡ ë³´ì • (í”Œë ˆì´ í™”ë©´ ì´íƒˆ ë°©ì§€)
      const boardSide = Math.max(0, Math.min(W, H) - pad*2);
      const cell = (boardSide - gap*(n-1)) / n;
      const boardX = (W - boardSide) / 2;
      const boardY = (H - boardSide) / 2;

      ctx.fillStyle=getCSS('--tile0');
      roundRect(ctx,boardX,boardY,boardSide,boardSide,18*DPR());
      ctx.fill();

      for(let r=0;r<n;r++){
        for(let c=0;c<n;c++){
          const x = boardX + c*(cell+gap);
          const y = boardY + r*(cell+gap);
          const v=this.grid[r][c];
          ctx.fillStyle=tileColor(v);
          roundRect(ctx,x,y,cell,cell,radius);
          ctx.fill();
          if(v){
            ctx.fillStyle='#111';
            ctx.font=`bold ${Math.floor(cell*0.38)}px ui-sans-serif`;
            ctx.textAlign='center';
            ctx.textBaseline='middle';
            ctx.fillText(v, x+cell/2, y+cell/2+1);
          }
        }
      }
    }

    flash(text){
      const ctx=this.ctx; const W=this.c.width, H=this.c.height;
      ctx.save();
      ctx.fillStyle='rgba(0,0,0,.35)';
      ctx.fillRect(0,0,W,H);
      ctx.fillStyle='#fff';
      ctx.font=`bold ${Math.floor(W*0.08)}px ui-sans-serif`;
      ctx.textAlign='center';
      ctx.fillText(text, W/2, H/2);
      ctx.restore();
    }
  }

  function roundRect(ctx,x,y,w,h,r){
    ctx.beginPath();
    ctx.moveTo(x+r,y);
    ctx.arcTo(x+w,y,x+w,y+h,r);
    ctx.arcTo(x+w,y+h,x,y+h,r);
    ctx.arcTo(x,y+h,x,y,r);
    ctx.arcTo(x,y,x+w,y,r);
    ctx.closePath();
  }
  function getCSS(n){ return getComputedStyle(document.documentElement).getPropertyValue(n)||'#fff'; }
  function tileColor(v){
    switch(v){
      case 0: return getCSS('--tile0');
      case 2: return getCSS('--t2'); case 4: return getCSS('--t4'); case 8: return getCSS('--t8'); case 16: return getCSS('--t16'); case 32: return getCSS('--t32'); case 64: return getCSS('--t64');
      case 128: return getCSS('--t128'); case 256: return getCSS('--t256'); case 512: return getCSS('--t512'); case 1024: return getCSS('--t1024'); case 2048: return getCSS('--t2048'); case 4096: return getCSS('--t4096');
      default: return getCSS('--t8192');
    }
  }

  function fitCabinet(){
    const cab = document.querySelector('.cabinet'); if(!cab) return;
    const margin = 16; cab.style.transform='none'; const w=cab.offsetWidth, h=cab.offsetHeight;
    const vw=window.innerWidth, vh=window.innerHeight;
    const needScale = (w > vw - margin*2) || (h > vh - margin*2);
    const scale = needScale ? Math.min(1, (vw - margin*2)/w, (vh - margin*2)/h) : 1;
    cab.style.transform = `scale(${scale})`;
  }
  window.addEventListener('resize', ()=>requestAnimationFrame(fitCabinet), {passive:true});
  window.addEventListener('orientationchange', ()=>requestAnimationFrame(fitCabinet), {passive:true});
  setTimeout(fitCabinet, 0);

  (function runTests(){
    try{
      const c=document.createElement('canvas');
      const g=new G2048(c,{testMode:true});
      g.size=4; g.grid=[[2,2,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];
      const s0=g.score; g.move('L');
      console.assert(g.grid[0][0]===4 && g.grid[0][1]===0,'merge L');
      console.assert(g.score-s0===4,'score add');
      g.points=0; g._scoreMilestone=0; g.score=0; g._awardScoreMilestones(); g.score=101; g._awardScoreMilestones(); console.assert(g._scoreMilestone>=1,'milestone step');
      g._tileBonusGiven={512:false,1024:false,2048:false,4096:false}; g._awardTileMilestone(1024);
      console.assert(g._tileBonusGiven[512]&&g._tileBonusGiven[1024],'tile bonuses flag');
    }catch(e){
      console.warn('2048 self-test skipped', e);
    }
  })();

  const game=new G2048(document.getElementById('game'));
  (function(){
    const tier=$('#tier'), lvl=$('#lvlRange');
    const applyTier=t=>{ let lv={beginner:1,intermediate:11,advanced:21,hell:40,doom:50,insane:100}[t]||1; lvl.value=lv; game.setLevel(lv); };
    applyTier(tier.value);
    lvl.addEventListener('input',()=> game.setLevel(+lvl.value));
    updateTicketUI();

    // âœ… í†µí•© HUD: app.jsì— refreshWalletHUDê°€ ìˆë‹¤ë©´ ìš°ì„  ì‚¬ìš©
    if (typeof window.refreshWalletHUD === 'function') {
      window.refreshWalletHUD();
    }
  })();

  // 2048 ì „ìš© BGM ì´ˆê¸°í™” (ì‚¬ìš©ì ì²« ìƒí˜¸ì‘ìš© ì‹œ ì¬ìƒ, ë³¼ë¥¨ 30%)
  (function initBackgroundMusic(){
    try{
      const bgm = document.getElementById('bgm2048');
      if (!bgm) return;
      bgm.volume = 0.3;

      let started = false;
      const start = () => {
        if (started) return;
        started = true;
        bgm.play().catch(()=>{ /* ì¼ë¶€ ë¸Œë¼ìš°ì €ì˜ ìë™ì¬ìƒ ì œí•œ ë¬´ì‹œ */ });
      };

      document.addEventListener('click', start, { once: true, passive: true });
      document.addEventListener('keydown', start, { once: true });
      document.addEventListener('touchstart', start, { once: true, passive: true });
    }catch(e){
      console.warn('bgm init failed', e);
    }
  })();
  </script>

  <div id="cookieBanner" class="cookie-banner" role="dialog" aria-live="polite" aria-label="Analytics consent">
    <div>ì„œë¹„ìŠ¤ í’ˆì§ˆ í–¥ìƒì„ ìœ„í•œ ë¶„ì„(ì¿ í‚¤) ì‚¬ìš©ì— ë™ì˜í•˜ì‹œë‚˜ìš”?</div>
    <div class="spacer"></div>
    <button class="deny" type="button">ê±°ë¶€</button>
    <button class="agree" type="button">ë™ì˜</button>
  </div>

  <script>
  (function(){
    try{
      var KEY='rg_analytics_consent';
      function init(){ if(typeof window.analyticsInit==='function') window.analyticsInit(); }
      var v=null; try{ v=localStorage.getItem(KEY); }catch(e){}
      var el=document.getElementById('cookieBanner');
      if(v==='yes'){ init(); if(el) el.style.display='none'; return; }
      if(!el){ return; }
      el.style.display='flex';
      var agree=el.querySelector('.agree'), deny=el.querySelector('.deny');
      if(agree) agree.addEventListener('click', function(){
        try{ localStorage.setItem(KEY,'yes'); }catch(e){}
        el.style.display='none'; init();
      });
      if(deny) deny.addEventListener('click', function(){
        try{ localStorage.setItem(KEY,'no'); }catch(e){}
        el.style.display='none';
      });
    }catch(e){ }
  })();
  </script>

  <!--
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ë‚´ë¶€ ê°œë°œ ê°€ì´ë“œ (ë¹„ì‹¤í–‰ ì£¼ì„) â€“ 2048 ê²Œì„ í˜ì´ì§€

    [ë ˆì´ì•„ì›ƒ/ë””ìì¸]
    - ì´ í˜ì´ì§€ëŠ” ë…ë¦½ í’€ìŠ¤í¬ë¦° ì•„ì¼€ì´ë“œ ë ˆì´ì•„ì›ƒì„ ì‚¬ìš©í•œë‹¤.
    - header/footer íŒŒì…œì€ HTMLì—ì„œ ì§ì ‘ include í•˜ì§€ ì•ŠëŠ”ë‹¤.
    - .cabinet, .marquee, .play, .deck êµ¬ì¡°ëŠ” ë‹¤ë¥¸ ë ˆíŠ¸ë¡œ ê²Œì„ë“¤ê³¼
      ë™ì¼í•œ ë¹„ìœ¨ê³¼ ì—¬ë°±ì„ ê³µìœ í•œë‹¤.
    - ìº”ë²„ìŠ¤ëŠ” .bezel ì•ˆì—ì„œ í•­ìƒ ì •ì‚¬ê°í˜•ìœ¼ë¡œ ì¤‘ì•™ ì •ë ¬ë˜ë©°,
      ë¸Œë¼ìš°ì € í¬ê¸°ì— ë”°ë¼ fitCabinet()ìœ¼ë¡œ ì „ì²´ ìºë¹„ë‹›ì´ ìŠ¤ì¼€ì¼ë§ëœë‹¤.
    - ì¢Œìš° ì„¸ë¡œí˜• ê´‘ê³  ë°°ë„ˆëŠ” retro-running ê³¼ ë™ì¼í•œ AdSense êµ¬ì¡°ë¥¼ ì‚¬ìš©í•œë‹¤.
      â€¢ data-ad-client, data-ad-slot ê°’ì€ ë©”íƒ€ íƒœê·¸ì™€ ì¼ì¹˜
      â€¢ ê° ins.adsbygoogle ë°”ë¡œ ì•„ë˜ì—ì„œ (adsbygoogle = ...).push({}) í˜¸ì¶œ

    [ê²Œì„ ë¡œì§]
    - G2048 í´ë˜ìŠ¤ëŠ” ë‹¤ìŒ ì—­í• ì„ ê°€ì§„ë‹¤.
      â€¢ makeGrid / spawn / move / isGameOver: í•µì‹¬ 2048 ê·œì¹™
      â€¢ paramsForLevel / difficultyMult: ë ˆë²¨ê³¼ ëª¨ë“œì— ë”°ë¥¸ ë‚œì´ë„ ê³¡ì„ 
      â€¢ awardPoints / _awardScoreMilestones / _awardTileMilestone / _snapshotBonusAtEnd:
        ê²Œì„ í”Œë ˆì´ ì¤‘ ì¸ê²Œì„ í¬ì¸íŠ¸(points)ë¥¼ ì ë¦½í•˜ëŠ” ë‚´ë¶€ ê·œì¹™
      â€¢ syncHUD: ì ìˆ˜/ìµœê³ ì /ì´ë™ìˆ˜ + í¬ì¸íŠ¸/í‹°ì¼“ ë°”ë¥¼ HUDì— ë°˜ì˜
      â€¢ manualEnd: ê²Œì„ ì¢…ë£Œ ì‹œ ìµœì¢… ì •ë¦¬ ë° ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ê³„

    [ê³„ì • ì§€ê°‘/ê²½í—˜ì¹˜/í‹°ì¼“ ì—°ë™]
    - ì´ íŒŒì¼ì€ /api/wallet* ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤.
    - ëª¨ë“  ê³„ì • ì§€ê°‘ ì—°ë™ì€ app.js ì—ì„œ ì œê³µí•˜ëŠ”
        window.sendGameReward(gameId, payload)
        window.refreshWalletHUD()
      ë‘ ì „ì—­ í•¨ìˆ˜ë§Œ ì‚¬ìš©í•œë‹¤.
    - 2048 ê²Œì„ì—ì„œ manualEnd() ì‹œ ë‹¤ìŒ ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬í•œë‹¤.
        1) _snapshotBonusAtEnd(maxTile) ìœ¼ë¡œ ì¸ê²Œì„ í¬ì¸íŠ¸ ë§ˆë¬´ë¦¬
        2) syncHUD() ë¡œ ê²Œì„ í™”ë©´ HUD ê°±ì‹ 
        3) addRecord() / addPlay() ë¡œ ë¡œì»¬(ë¸Œë¼ìš°ì € ì „ìš©) ê¸°ë¡ ì €ì¥
        4) tryDailyMissionBonus2048() ë¡œ ì„¸íŠ¸ ë¯¸ì…˜ í”Œë˜ê·¸ ê°±ì‹ 
        5) calcReward() ë¥¼ í†µí•´ score/points/maxTile/level ê¸°ë°˜ delta ê³„ì‚°
        6) meta ê°ì²´ì— ê²Œì„/ë‚œì´ë„/ë³´ë“œ/ë¡œì»¬ ê¸°ë¡/ì¢…ë£Œ ì •ë³´ ë“±ì„ ëª¨ë‘ ë‹´ì•„ í™•ì¥
        7) applyGlobalRewardAndSyncWallet('2048', delta, meta)ë¥¼ í˜¸ì¶œ
           - delta: { xp, tickets, coins }  (retro-running ê³¼ ë™ì¼ êµ¬ì¡°)
           - meta : { gameId, score, points, level, maxTile,
                      moves, boardSize, boardType, tier,
                      localPlays, localTickets, localPointsInGame,
                      endedAt, endedBy }
        8) notifyFinish(finalScore, meta) ë¡œ ìƒìœ„ ëŸ°íƒ€ì„/analytics ì— ì „ë‹¬
    - calcReward() ì˜ ì„¸ë¶€ ë¡œì§ì€ ê²Œì„ ë°¸ëŸ°ìŠ¤ ì¡°ì • ì‹œ ì¡°ì ˆí•  ìˆ˜ ìˆìœ¼ë©°,
      ì„œë²„ ì—”ë“œí¬ì¸íŠ¸ì˜ ê³„ì•½(delta/points/xp/tickets)ê³¼ë§Œ ë§ìœ¼ë©´ ëœë‹¤.

    [ë¡œì»¬ ê¸°ë¡ vs ê³„ì • ì§€ê°‘]
    - LS_KEYS(plays2048, tickets2048, records2048, best2048)ëŠ”
      ë¸Œë¼ìš°ì € ë¡œì»¬ì—ë§Œ ì €ì¥ë˜ëŠ” ê¸°ë¡ì´ë‹¤.
      â€¢ plays : ë¡œì»¬ í”Œë ˆì´ íšŸìˆ˜
      â€¢ tickets : ë¡œì»¬ í‹°ì¼“(ë¸Œë¼ìš°ì € ì „ìš©, ê³„ì • ì§€ê°‘ê³¼ ë³„ë„)
      â€¢ records : ë‚ ì§œ/ì‹œê°„/ì ìˆ˜/í¬ì¸íŠ¸ íˆìŠ¤í† ë¦¬
      â€¢ best : ë¡œì»¬ ìµœê³  ì ìˆ˜
    - LS_KEYS.mission / missionRewarded ëŠ” retro-running ê³¼ ë™ì¼ í‚¤ë¥¼ ì‚¬ìš©í•´
      ì¼ì¼ ì„¸íŠ¸ ë¯¸ì…˜ í”Œë˜ê·¸ë¥¼ ê³µìœ í•œë‹¤.
    - ê³„ì • ì§€ê°‘(í¬ì¸íŠ¸/í‹°ì¼“/ê²½í—˜ì¹˜)ì€ ì„œë²„ /api/wallet* ì— ì˜í•´ ê´€ë¦¬ë˜ë©°,
      applyGlobalRewardAndSyncWallet â†’ sendGameReward ê²½ë¡œë¥¼ í†µí•´ì„œë§Œ ë³€ê²½ëœë‹¤.
    - UI ìƒì—ì„œ data-user-points, data-user-tickets ë“±ì€
      app.js ê°€ ì„¸ì…˜(/auth/me)ê³¼ ì§€ê°‘(/api/wallet)ì„ ê¸°ì¤€ìœ¼ë¡œ ê°’ì„ ì±„ìš´ë‹¤.
      ì´ ê°’ì€ ë¡œì»¬ LS_KEYS ê°’ê³¼ëŠ” ë³„ê°œì´ë‹¤.

    [ê´‘ê³ ]
    - ê´‘ê³ ëŠ” ì„¸ ê°€ì§€ íƒ€ì…ì„ ì‚¬ìš©í•œë‹¤.
      1) head ì˜ì—­ global AdSense (client=ca-pub-6713974265397310)
      2) ì¢Œ/ìš° ì„¸ë¡œ ë°°ë„ˆ(4514999077, auto í˜•ì‹ â€“ retro-running ê³¼ ë™ì¼)
      3) ì¸í„°ìŠ¤í‹°ì…œ ëª¨ë‹¬(showAdThen, showInterstitialAd)
    - ê°œë°œ/í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” adsbygoogle.push() í˜¸ì¶œì´ ì‹¤íŒ¨í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ,
      try/catch ë¡œ ê°ì‹¸ê³  placeholder UI ë¥¼ ë³´ì—¬ì¤€ë‹¤.

    [ì ‘ê·¼ì„±/ë°˜ì‘í˜•]
    - aria-label, role="dialog", aria-modal ì†ì„±ì„ ì‚¬ìš©í•˜ì—¬
      ì£¼ìš” ì˜ì—­ì˜ ìŠ¤í¬ë¦° ë¦¬ë” ë™ì‘ì„ ê³ ë ¤í–ˆë‹¤.
    - ëª¨ë°”ì¼ì—ì„œ .cabinet ì€ ì „ì²´ í­ì„ ì‚¬ìš©í•˜ë©°, safe-area-inset-bottom ì„
      padding-bottom ì— ë°˜ì˜í•˜ì—¬ í™ˆ ì¸ë””ì¼€ì´í„° ì˜ì—­ê³¼ ê²¹ì¹˜ì§€ ì•ŠëŠ”ë‹¤.
    - ìº”ë²„ìŠ¤ëŠ” DPR(ë””ë°”ì´ìŠ¤ í”½ì…€ ë¹„ìœ¨)ì„ ê³ ë ¤í•´ ê³ í•´ìƒë„ë¡œ ë Œë”ë§í•œë‹¤.

    [analytics êµ¬ì¡° í†µì¼]
    - notifyStart / notifyFinish ì˜ ì‹œê·¸ë‹ˆì²˜ë¥¼ retro-running ê³¼ ë§ì¶”ì—ˆë‹¤.
      â€¢ notifyStart('2048')
      â€¢ notifyFinish(finalScore, meta)
    - ì¼ì¼ ì„¸íŠ¸ ë¯¸ì…˜ í”Œë˜ê·¸(daily_mission_flags/daily_mission_rewarded)ëŠ”
      retro-running ì˜ runner / tetris ì™€ ë™ì¼í•œ ìŠ¤í‚¤ë§ˆë¥¼ ì‚¬ìš©í•œë‹¤.
      â€¢ runner: flags[date].runner = true
      â€¢ 2048 : flags[date]['2048'] = true
      â€¢ tetris: flags[date].tetris = true
    - ë¯¸ì…˜ ë³´ìƒ ìì²´ëŠ” ì„œë²„ì¸¡/í—ˆë¸Œì—ì„œ ì²˜ë¦¬ ê°€ëŠ¥í•˜ë„ë¡,
      ì—¬ê¸°ì„œëŠ” í”Œë˜ê·¸ë§Œ ì •í™•íˆ ê¸°ë¡í•œë‹¤.

    [ìœ ì§€ë³´ìˆ˜ ê°€ì´ë“œ]
    - ë‹¤ë¥¸ ë ˆíŠ¸ë¡œ ê²Œì„(í…ŒíŠ¸ë¦¬ìŠ¤, ë¸Œë¦­ ë¸Œë ˆì´ì»¤, ëŸ¬ë„ˆ ë“±)ë„
      ì´ êµ¬ì¡°ì™€ ë™ì¼í•œ íŒ¨í„´ìœ¼ë¡œ ì •ë¦¬í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.
        â€¢ ê²Œì„ ë‚´ë¶€: calcReward + applyGlobalRewardAndSyncWallet í˜¸ì¶œë§Œ ìœ ì§€
        â€¢ ì§€ê°‘ API í˜¸ì¶œ: app.js ë‹¨ì¼ í—ˆë¸Œì—ì„œë§Œ ìˆ˜í–‰
    - ìƒˆë¡œìš´ ê²Œì„ì„ ì¶”ê°€í•  ë•Œì—ëŠ”:
        1) meta.ts ì— gameId ë¥¼ ë“±ë¡
        2) user-retro-games.html ì— ì¹´ë“œ ì¶”ê°€
        3) ê²Œì„ HTML ì—ì„œ gameStart/gameFinish/applyGlobalRewardAndSyncWallet íŒ¨í„´ ì—°ê²°
      ìˆœì„œë¡œ ì‘ì—…í•œë‹¤.

    ì´ ë¸”ë¡ì€ íŒŒì¼ ì¤„ ìˆ˜ í™•ë³´ + ìœ ì§€ë³´ìˆ˜ ê°€ì´ë“œë¥¼ ìœ„í•œ ì£¼ì„ìœ¼ë¡œ,
    ì‹¤ì œ ì‹¤í–‰ì—ëŠ” ì•„ë¬´ ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤.
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  -->

</body>
</html>
